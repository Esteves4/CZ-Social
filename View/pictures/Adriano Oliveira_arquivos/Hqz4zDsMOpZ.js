if (self.CavalryLogger) { CavalryLogger.start_js(["sVimX"]); }

__d('MessengerTabIndices',[],function a(b,c,d,e,f,g){'use strict';if(c.__markCompiled)c.__markCompiled();var h={NEW_MESSAGE_TOKENIZER:9998,COMPOSER_INPUT:9999};f.exports=h;},null);
__d('MessengerScrollableTypeaheadView.react',['MessengerScrollableArea.react','MessengerTypeaheadUtils','MessengerTypeaheadView.react','ReactComponentWithPureRenderMixin','React'],function a(b,c,d,e,f,g){'use strict';if(c.__markCompiled)c.__markCompiled();var h=c('React').createClass({displayName:'MessengerScrollableTypeaheadView',mixins:[c('ReactComponentWithPureRenderMixin')],render:function(){var i=this.props,j=i.className,k=i.width,l=babelHelpers.objectWithoutProperties(i,['className','width']);return (c('React').createElement(c('MessengerScrollableArea.react'),{className:j,ref:'scrollable',width:k},c('React').createElement(c('MessengerTypeaheadView.react'),babelHelpers['extends']({},l,{onScrollIntoView:this._handleScrollIntoView}))));},_handleScrollIntoView:function(i){c('MessengerTypeaheadUtils').scrollEntryIntoView(i,this.refs.scrollable);}});f.exports=h;},null);
__d('MessengerTokenizer.react',['cx','invariant','AbstractTokenizer.react','immutable','React','SearchableEntry','MessengerScrollableTypeaheadView.react','MessengerTokenizerToken.react','MessengerTypeaheadUtils','ReactComponentWithPureRenderMixin','joinClasses'],function a(b,c,d,e,f,g,h,i){'use strict';if(c.__markCompiled)c.__markCompiled();var j=c('React').PropTypes,k=30,l=c('React').createClass({displayName:'MessengerTokenizer',mixins:[c('ReactComponentWithPureRenderMixin')],propTypes:{autoFocus:j.bool,className:j.string,context:j.object,entries:j.instanceOf(c('immutable').List).isRequired,excludeGroups:j.bool,extraRendererProps:j.object,hasHoverState:j.bool,hideViewWithEntries:j.bool,onAddEntryAttempt:j.func.isRequired,onEntriesFound:j.func,onRemoveEntryAttempt:j.func.isRequired,onReorderEntryAttempt:j.func,originalEntryIDs:j.instanceOf(c('immutable').Set),placeholder:j.string,searchSource:j.object.isRequired,tabIndex:j.number,useLayer:j.bool,viewer:j.string.isRequired},getDefaultProps:function(){return {excludeGroups:false,hideViewWithEntries:true};},getInitialState:function(){return {isLoading:false,isLoaded:false,queryString:''};},componentDidMount:function(){if(this.props.autoFocus)this.focusInput();},render:function(){return (c('React').createElement('div',{className:c('joinClasses')(this.props.className,"_14-7")},c('React').createElement(c('AbstractTokenizer.react'),{autoHighlight:this.props.hasHoverState,context:this.props.context,entries:this.props.entries.toArray(),excludeTokenEntries:!!this.state.queryString,hideViewWithEntries:this.props.hideViewWithEntries,onAddEntryAttempt:this._handleAddEntryAttempt,onEntriesFound:this.props.onEntriesFound,onQueryStringChange:this._handleQueryStringChange,onRemoveEntryAttempt:this.props.onRemoveEntryAttempt,onReorderEntryAttempt:this.props.onReorderEntryAttempt,placeholder:this.props.placeholder,presenter:{ViewRenderer:c('MessengerScrollableTypeaheadView.react'),TokenRenderer:c('MessengerTokenizerToken.react'),alwaysVisibleOnFocus:(this.state.isLoading||this.state.isLoaded)&&!!this.state.queryString,useLayer:this.props.useLayer,extraRendererProps:babelHelpers['extends']({hasHoverState:this.props.hasHoverState,isLoading:this.state.isLoading,originalEntryIDs:this.props.originalEntryIDs,selectedEntryIDs:c('immutable').Seq(this.props.entries).map(function(m){return m.getUniqueID();}).toSet(),viewer:this.props.viewer},this.props.extraRendererProps),maxEntries:k,sortEntries:this._sortEntries},queryString:this.state.queryString,ref:'tokenizer',searchSource:this.props.searchSource,searchSourceOptions:{onQueryFinished:this._handleQueryFinished,onQueryStarted:this._handleQueryStarted,showDefaultEntries:this.props.showDefaultEntries},showEntriesOnFocus:true,tabIndex:this.props.tabIndex&&this.props.tabIndex.toString()})));},_handleAddEntryAttempt:function(m){this.setState({isLoaded:false,queryString:''});var n=m.getUniqueID();if(this.props.entries.some(function(o){return (o.getUniqueID()===n);})){this.props.onRemoveEntryAttempt(m);return;}if(this.props.originalEntryIDs&&this.props.originalEntryIDs.contains(n))return;this.props.onAddEntryAttempt(m);},_sortEntries:function(m){if(this.props.entries.size||this.props.excludeGroups)return c('MessengerTypeaheadUtils').sortEntriesWithoutGroupsOrViewer(m,this.props.viewer);return c('MessengerTypeaheadUtils').sortEntries(m,this.state.queryString);},focusInput:function(){setTimeout(function(){this.refs.tokenizer&&this.refs.tokenizer.focusInput();}.bind(this));},_handleQueryStarted:function(m){if(m===this.state.queryString)this.setState({isLoading:true});},_handleQueryFinished:function(m){if(m===this.state.queryString)this.setState({isLoaded:true,isLoading:false});},_handleQueryStringChange:function(event){!(event.target instanceof HTMLInputElement)?i(0):void 0;this.setState({isLoaded:false,queryString:event.target.value});}});f.exports=l;},null);
__d('MessengerComposeViewHeader.react',['cx','fbt','immutable','MessengerSearchSource','MessengerTabIndices','MessengerTokenizer.react','ReactComponentWithPureRenderMixin','React','clearImmediate','joinClasses','setImmediate'],function a(b,c,d,e,f,g,h,i){'use strict';if(c.__markCompiled)c.__markCompiled();var j=c('React').PropTypes,k=320,l=c('React').createClass({displayName:'MessengerComposeViewHeader',mixins:[c('ReactComponentWithPureRenderMixin')],propTypes:{onAddRecipient:j.func.isRequired,onRemoveRecipient:j.func.isRequired,onResize:j.func.isRequired,recipients:j.instanceOf(c('immutable').List).isRequired,viewer:j.string.isRequired},_timer:null,getInitialState:function(){return {tokenizerContext:null};},componentDidMount:function(){this._focusTokenizer();this.setState({tokenizerContext:this.refs.tokenizerContext});},componentDidUpdate:function(m){if(this.props.recipients!==m.recipients)this.props.onResize();},componentWillUnmount:function(){this._timer&&c('clearImmediate')(this._timer);},render:function(){return (c('React').createElement('div',{className:c('joinClasses')("_2y8y _5l-3",this.props.className),onClick:this._focusTokenizer},c('React').createElement('div',{className:"_2y8z"},i._("Para:")),c('React').createElement('div',null,c('React').createElement(c('MessengerTokenizer.react'),{className:"_2y8-",context:this.state.tokenizerContext,entries:this.props.recipients,extraRendererProps:{className:"_2y8_",width:k},hasHoverState:true,onAddEntryAttempt:this.props.onAddRecipient,onRemoveEntryAttempt:this.props.onRemoveRecipient,placeholder:i._("Digite o nome de uma pessoa ou grupo"),ref:'tokenizer',searchSource:c('MessengerSearchSource').getForFBID(this.props.viewer),tabIndex:c('MessengerTabIndices').NEW_MESSAGE_TOKENIZER,useLayer:true,viewer:this.props.viewer}),c('React').createElement('div',{ref:'tokenizerContext'}))));},_focusTokenizer:function(){this._timer=c('setImmediate')(function(){this.refs.tokenizer&&this.refs.tokenizer.focusInput();}.bind(this));}});f.exports=l;},null);
__d("XMessagingForwardAttachmentController",["XController"],function a(b,c,d,e,f,g){c.__markCompiled&&c.__markCompiled();f.exports=c("XController").create("\/mercury\/attachments\/forward\/",{});},null);
__d('MessengerForwardAttachmentDialog.react',['ix','cx','fbt','AsyncRequest','CurrentUser','Image.react','immutable','LayerFadeOnHide','MessengerComposeViewHeader.react','MessengerDialog.react','MessengerDialogBody.react','MessengerDialogButton.react','MessengerDialogCancelButton.react','MessengerDialogFooter.react','MessengerDialogHeader.react','MessengerDialogTitle.react','MessengerSpinner.react','React','XMessagingForwardAttachmentController','emptyFunction','fbglyph'],function a(b,c,d,e,f,g,h,i,j){if(c.__markCompiled)c.__markCompiled();var k=c('React').PropTypes,l=c('React').createClass({displayName:'MessengerForwardAttachmentDialog',propTypes:{attachmentID:k.string.isRequired,onClose:k.func,shown:k.bool.isRequired,title:k.string.isRequired},getInitialState:function(){return {recipients:c('immutable').List(),sendError:null,sending:false,startingThreadingID:Date.now()};},render:function(){var m=j._("Enviar"),n;if(this.state.sending){n=c('React').createElement('div',null,c('React').createElement(c('MessengerSpinner.react'),null),c('React').createElement('span',{className:"_1e1n _3-99"},j._("Enviando")));}else if(this.state.sendError){var o=h("\/images\/assets_DO_NOT_HARDCODE\/fb_glyphs\/caution-solid_16_bluegray-40.png");n=c('React').createElement('div',{className:"_1e1n"},c('React').createElement(c('Image.react'),{src:o}),c('React').createElement('span',{className:"_3-99"},this.state.sendError));}return (c('React').createElement(c('MessengerDialog.react'),{shown:this.props.shown,behaviors:{LayerFadeOnHide:c('LayerFadeOnHide')},onToggle:this._handleToggle,width:560},c('React').createElement(c('MessengerDialogHeader.react'),null,c('React').createElement(c('MessengerDialogTitle.react'),null,this.props.title)),c('React').createElement(c('MessengerDialogBody.react'),null,c('React').createElement(c('MessengerComposeViewHeader.react'),{className:"_1e1o",onAddRecipient:this._handleAddRecipient,onRemoveRecipient:this._handleRemoveRecipient,onResize:c('emptyFunction'),recipients:this.state.recipients,viewer:c('CurrentUser').getID()})),c('React').createElement(c('MessengerDialogFooter.react'),{leftContent:n},c('React').createElement(c('MessengerDialogCancelButton.react'),{onClick:this.props.onClose}),c('React').createElement(c('MessengerDialogButton.react'),{action:'confirm',disabled:!this.state.recipients.size||this.state.sending,label:m,onClick:this._handleSubmit,type:'primary'}))));},_handleAddRecipient:function(m){this.setState({recipients:this.state.recipients.push(m)});},_handleRemoveRecipient:function(m){var n=this.state.recipients;this.setState({recipients:n['delete'](n.indexOf(m))});},_handleSubmit:function(){var m={},n=this.state.startingThreadingID;this.state.recipients.forEach(function(p){m[n++]=p.getUniqueID();});var o=c('XMessagingForwardAttachmentController').getURIBuilder().getURI();new (c('AsyncRequest'))(o).setMethod('POST').setHandler(this._handleSubmitResponse).setData({attachment_id:this.props.attachmentID,recipient_map:m}).send();this.setState({sending:true,sendError:null});},_handleSubmitResponse:function(m){if(m.payload.success){this.props.onClose&&this.props.onClose();this.setState({recipients:c('immutable').List(),sending:false,startingThreadingID:Date.now()});return;}this.setState({sending:false,sendError:m.payload.error});},_handleToggle:function(m){if(!m)this.props.onClose&&this.props.onClose();}});f.exports=l;},null);
__d('MessagingRecipientTypeaheadItem.react',['cx','BackgroundImage.react','ChatTypeaheadConstants','ImageBlock.react','LeftRight.react','React','SplitImage.react','MercuryThreadMetadataRawRenderer','TypeaheadViewItem','joinClasses'],function a(b,c,d,e,f,g,h){if(c.__markCompiled)c.__markCompiled();var i=c('React').PropTypes,j=c('React').createClass({displayName:'MessagingRecipientTypeaheadItem',propTypes:babelHelpers['extends']({},c('TypeaheadViewItem').propTypes,{imageSize:i.number.isRequired}),mixins:[c('TypeaheadViewItem').Mixin],isThreadRecipient:function(){return this.props.entry.getType()===c('ChatTypeaheadConstants').THREAD_TYPE;},_getImage:function(){var k=this.props.entry;if(k.getType()===c('ChatTypeaheadConstants').THREAD_TYPE&&!k.getPhoto()){var l=k.getAuxiliaryData();return (c('React').createElement(c('SplitImage.react'),{size:this.props.imageSize,srcs:l.participantsToRender.map(function(m){return m.image_src;})}));}if(k.getPhoto())return (c('React').createElement(c('BackgroundImage.react'),{width:this.props.imageSize,height:this.props.imageSize,backgroundSize:'cover',src:k.getPhoto()}));return c('React').createElement('span',null);},_getThreadParticipantList:function(){if(!this.isThreadRecipient())return null;var k=this.props.entry;return c('MercuryThreadMetadataRawRenderer').renderRawParticipantList(k.getUniqueID(),k.getAuxiliaryData().participantsToRender,k.getAuxiliaryData().thread.participants.length-1,{names_renderer:c('MercuryThreadMetadataRawRenderer').renderShortNames});},_getTitle:function(){var k=this.props.entry;if(this.isThreadRecipient()&&!k.getTitle())return this._getThreadParticipantList();return k.getTitle();},_getSubtitle:function(){var k=this.props.entry;if(this.isThreadRecipient()&&!k.getTitle())return this._getThreadParticipantList();return k.getSubtitle()?k.getSubtitle().split(' \u00b7 ')[0]:null;},render:function(){var k=this._getSubtitle(),l=c('joinClasses')("_599m"+(' '+"_55xn")+(!k?' '+"_5mne":'')+(this.props.highlighted?' '+"_599n":''),this.props.className);return (c('React').createElement('li',{'aria-selected':this.props.selected,className:l,onMouseDown:this._onSelect,onMouseEnter:this._onHighlight,role:this.props.role},c('React').createElement(c('ImageBlock.react'),{spacing:'medium'},this._getImage(),c('React').createElement(c('LeftRight.react'),null,c('React').createElement('div',null,c('React').createElement('div',{className:"_55xt _599p"},this._getTitle()),c('React').createElement('div',{className:"_55z3 _599q"},k)),this.props.children))));}});f.exports=j;},null);
__d('MessagingRecipientSelectedList.react',['cx','fbt','xuiglyph','Image.react','LeftRight.react','Map','MessagingRecipientTypeaheadItem.react','React'],function a(b,c,d,e,f,g,h,i,j){if(c.__markCompiled)c.__markCompiled();var k=c('React').PropTypes,l=c('React').createClass({displayName:'MessagingRecipientSelectedList',propTypes:{entries:k.instanceOf(c('Map')),onSelect:k.func.isRequired},_renderSelectedEntry:function(m){var n=j({name:'cross',shade:'dark',size:'small'});return (c('React').createElement(c('MessagingRecipientTypeaheadItem.react'),{key:m.getUniqueID(),entry:m,imageSize:24,onSelect:this.props.onSelect},c('React').createElement(c('Image.react'),{className:"_1jm4",src:n})));},render:function(){var m=i._("Enviar para:"),n=[];this.props.entries.forEach(function(o){return n.push(this._renderSelectedEntry(o));}.bind(this));return (c('React').createElement('div',{className:"_1jm5"},c('React').createElement(c('LeftRight.react'),{className:"_1jm6 _2ph-"},c('React').createElement('span',null,m),c('React').createElement('span',null,this.props.entries.size)),c('React').createElement('ul',null,n)));}});f.exports=l;},null);
__d('MessagingRecipientTypeaheadView.react',['cx','fbt','CenteredContainer.react','Link.react','Map','MessagingRecipientTypeaheadItem.react','React','TypeaheadViewPropTypes','XUISpinner.react'],function a(b,c,d,e,f,g,h,i){if(c.__markCompiled)c.__markCompiled();var j=c('React').PropTypes,k=32,l=c('React').createClass({displayName:'MessagingRecipientTypeaheadView',propTypes:babelHelpers['extends']({},c('TypeaheadViewPropTypes'),{selectedEntries:j.instanceOf(c('Map')),loading:j.bool}),getDefaultProps:function(){return {role:'listbox'};},_renderItem:function(m){var n=m===this.props.highlightedEntry,o=this.props.selectedEntries.has(m.getUniqueID());return (c('React').createElement(c('MessagingRecipientTypeaheadItem.react'),{key:m.getUniqueID(),entry:m,highlighted:n,imageSize:k,selected:o,onSelect:this.props.onSelect,onHighlight:this.props.onHighlight,onRenderHighlight:this.props.onRenderHighlight},c('React').createElement(c('Link.react'),{'aria-checked':o,className:"_2i83"+(o?' '+"_2i85":'')+(!o?' '+"_2i86":''),href:'#',role:'checkbox',tabIndex:'0'})));},render:function(){if(this.props.entries.length===0&&!this.props.loading)return (c('React').createElement(c('CenteredContainer.react'),{className:"_2pi1"},i._("Nenhum resultado")));return (c('React').createElement('ul',{id:this.props.ariaOwneeID,className:"_51do",role:this.props.role},this.props.entries.map(this._renderItem),c('React').createElement('div',{className:"_51dq"},this.props.loading?c('React').createElement(c('XUISpinner.react'),null):null)));}});f.exports=l;},null);
__d('MessagingForwardAttachmentDialog.react',['ix','cx','fbt','AsyncRequest','ChatSearchSource','Image.react','LayerFadeOnHide','Layout.react','Map','MessagingRecipientSelectedList.react','MessagingRecipientTypeaheadView.react','React','SearchableTextInput.react','ScrollableArea.react','XMessagingForwardAttachmentController','XUIDialog.react','XUIDialogBody.react','XUIDialogButton.react','XUIDialogCancelButton.react','XUIDialogFooter.react','XUIDialogTitle.react','XUISpinner.react','fbglyph','requireWeak'],function a(b,c,d,e,f,g,h,i,j){if(c.__markCompiled)c.__markCompiled();var k=c('Layout.react').Column,l=c('Layout.react').FillColumn,m=c('React').PropTypes,n=c('React').createClass({displayName:'MessagingForwardAttachmentDialog',propTypes:{attachmentID:m.string.isRequired,onClose:m.func,shown:m.bool.isRequired,title:m.string.isRequired},getInitialState:function(){return {bootstrappedEntries:[],entries:[],loading:true,selectedEntries:new (c('Map'))(),sendError:null,sending:false,startingThreadingID:Date.now(),query:''};},componentWillMount:function(){this._dataSource=new (c('ChatSearchSource'))({queryRequests:[{uri:'/ajax/mercury/composer_query.php'}]});},componentDidMount:function(){c('requireWeak')('OrderedFriendsList',function(o){return (o.getSearchableEntries(20,function(p){this.setState({bootstrappedEntries:p,loading:false});}.bind(this)));}.bind(this));},_onSelectEntry:function(o){var p=o.getUniqueID(),q=new (c('Map'))(this.state.selectedEntries);if(q.has(p)){q['delete'](p);}else q.set(p,o);this.setState({selectedEntries:q});},_onSearchChange:function(o){var p=o.target.value;this.setState({loading:true,query:p});},_onSearchEntriesFound:function(o){this.setState({entries:o});},_onSearchFinished:function(o){o===this.state.query&&this.setState({loading:false});},_onSubmit:function(){var o={},p=this.state.startingThreadingID;this.state.selectedEntries.forEach(function(r){o[p++]=r.getUniqueID();});var q=c('XMessagingForwardAttachmentController').getURIBuilder().getURI();new (c('AsyncRequest'))(q).setMethod('POST').setHandler(this._onSubmitResponse).setData({attachment_id:this.props.attachmentID,recipient_map:o}).send();this.setState({sending:true,sendError:null});},_onSubmitResponse:function(o){if(o.payload.success){this.props.onClose&&this.props.onClose();this.setState({bootstrappedEntries:[],selectedEntries:new (c('Map'))(),sending:false,startingThreadID:Date.now(),query:''});return;}this.setState({sending:false,sendError:o.payload.error});},_onToggle:function(o){if(!o)this.props.onClose();},render:function(){var o=j._("Enviar"),p=null;if(this.state.sending){p=c('React').createElement('div',null,c('React').createElement(c('XUISpinner.react'),null),c('React').createElement('span',{className:"_5s0d _3-99"},j._("Enviando")));}else if(this.state.sendError){var q=h("\/images\/assets_DO_NOT_HARDCODE\/fb_glyphs\/caution-solid_16_bluegray-40.png");p=c('React').createElement('div',{className:"_5s0d"},c('React').createElement(c('Image.react'),{src:q}),c('React').createElement('span',{className:"_3-99"},this.state.sendError));}var r=j._("Procurar pessoas e grupos");return (c('React').createElement(c('XUIDialog.react'),{shown:this.props.shown,behaviors:{LayerFadeOnHide:c('LayerFadeOnHide')},onToggle:this._onToggle,width:560},c('React').createElement(c('XUIDialogTitle.react'),null,this.props.title),c('React').createElement(c('XUIDialogBody.react'),{useCustomPadding:true},c('React').createElement(c('Layout.react'),null,c('React').createElement(k,{className:"_5s0e"},c('React').createElement('div',{className:"_2ph_"},c('React').createElement(c('SearchableTextInput.react'),{className:"_5s0f autofocus",onChange:this._onSearchChange,onEntriesFound:this._onSearchEntriesFound,placeholder:r,queryString:this.state.query,searchSource:this._dataSource,searchSourceOptions:{onQueryFinished:this._onSearchFinished}})),c('React').createElement(c('ScrollableArea.react'),{className:"_5s0g",height:400,width:360},c('React').createElement(c('MessagingRecipientTypeaheadView.react'),{entries:this.state.query?this.state.entries:this.state.bootstrappedEntries,loading:this.state.loading,selectedEntries:this.state.selectedEntries,onSelect:this._onSelectEntry}))),c('React').createElement(l,{className:"_5s0h"},c('React').createElement(c('ScrollableArea.react'),{height:457,shadow:false},c('React').createElement(c('MessagingRecipientSelectedList.react'),{entries:this.state.selectedEntries,onSelect:this._onSelectEntry}))))),c('React').createElement(c('XUIDialogFooter.react'),{leftContent:p},c('React').createElement(c('XUIDialogCancelButton.react'),{onClick:this.props.onClose}),c('React').createElement(c('XUIDialogButton.react'),{use:'confirm',disabled:!this.state.selectedEntries.size||this.state.sending,label:o,onClick:this._onSubmit}))));}});f.exports=n;},null);
__d("XForwardingNUXSeenController",["XController"],function a(b,c,d,e,f,g){c.__markCompiled&&c.__markCompiled();f.exports=c("XController").create("\/chat\/forwarding_nux_seen\/",{});},null);
__d('MessagingForwardingButtonNUX.react',['AsyncRequest','ChatConfig','React','XForwardingNUXSeenController','XUIAmbientNUX.react'],function a(b,c,d,e,f,g){if(c.__markCompiled)c.__markCompiled();var h=c('React').PropTypes,i=c('React').createClass({displayName:'MessagingForwardingButtonNUX',propTypes:{contextRef:h.func.isRequired},getInitialState:function(){return {showNUX:!c('ChatConfig').get('seen_forwarding_nux')};},_onClose:function(){if(!this.state.showNUX)return;c('ChatConfig').set('seen_forwarding_nux',true);new (c('AsyncRequest'))(c('XForwardingNUXSeenController').getURIBuilder().getURI()).send();this.setState({showNUX:false});},render:function(){return (c('React').createElement(c('XUIAmbientNUX.react'),{contextRef:this.props.contextRef,onCloseButtonClick:this._onClose,position:'left',width:'auto',shown:this.state.showNUX},this.props.children));},close:function(){this._onClose();}});f.exports=i;},null);
__d("XMessagingVideoAttachmentController",["XController"],function a(b,c,d,e,f,g){c.__markCompiled&&c.__markCompiled();f.exports=c("XController").create("\/mercury\/attachments\/video\/",{video_id:{type:"String",required:true},video_container_id:{type:"String",required:true},width:{type:"Int",required:true},height:{type:"Int",required:true}});},null);
__d('MessagingVideoViewer.react',['cx','fbt','ActorURI','ArbiterMixin','AsyncRequest','CurrentEnvironment','MessagingForwardAttachmentDialog.react','MessagingForwardingButtonNUX.react','MessengerForwardAttachmentDialog.react','React','ReactLayeredComponentMixin','SpotlightViewer','SpotlightViewerBottomBar','SpotlightViewerBottomBarGroup','SpotlightViewerBottomBarLink','SpotlightViewerClose','SpotlightViewport','PageTransitionsRegistrar','PhotoViewerDimensions','XMessagingVideoAttachmentController','Vector','guid'],function a(b,c,d,e,f,g,h,i){if(c.__markCompiled)c.__markCompiled();var j=c('React').PropTypes,k=200,l=c('React').createClass({displayName:'MessagingVideoViewer',propTypes:{disableForward:j.bool,pageID:j.number,rootClassName:j.string,videoSize:j.instanceOf(c('Vector')).isRequired,videoID:j.string.isRequired,videoURI:j.string.isRequired},mixins:[c('ArbiterMixin'),c('ReactLayeredComponentMixin')],getInitialState:function(){var m=new (c('PhotoViewerDimensions'))({verticalPadding:k});return {dimensions:m.getStageDimensions(this.props.videoSize),loading:true,open:true,showForward:false};},componentWillMount:function(){this._domID=c('guid')();},componentDidMount:function(){this._loadVideoPlayer();c('PageTransitionsRegistrar').registerCompletionCallback(function(){this.close();return true;}.bind(this));},_loadVideoPlayer:function(){var m=c('XMessagingVideoAttachmentController').getURIBuilder().setString('video_id',this.props.videoID).setString('video_container_id',this._domID).setInt('width',this.state.dimensions.x).setInt('height',this.state.dimensions.y).getURI();if(this.props.pageID)m=c('ActorURI').create(m,this.props.pageID);this.request=new (c('AsyncRequest'))().setMethod('GET').setURI(m).setReadOnly(true).setHandler(function(n){return this.setState({loading:false});}.bind(this)).send();},close:function(){if(!this.state.open)return;this.setState({open:false},function(){this.inform('close');});},_showForwardDialog:function(){this.setState({showForward:true});this.refs.forwardNUX.close();},_hideForwardDialog:function(){this.setState({showForward:false});},renderLayers:function(){if(this.props.disableForward)return {};var m=i._("Encaminhar em mensagens separadas"),n=c('CurrentEnvironment').messengerdotcom?c('MessengerForwardAttachmentDialog.react'):c('MessagingForwardAttachmentDialog.react');return {forwardDialog:c('React').createElement(n,{attachmentID:this.props.videoID,onClose:this._hideForwardDialog,shown:this.state.showForward,title:m}),forwardButtonNUX:c('React').createElement(c('MessagingForwardingButtonNUX.react'),{contextRef:function(){return this.refs.forwardButton;}.bind(this),ref:'forwardNUX'},i._("Envie este v\u00eddeo a outras pessoas em mensagens separadas."))};},render:function(){var m=c('React').createElement('div',{className:"rfloat",id:this._domID}),n;if(!this.props.disableForward)n=c('React').createElement(c('SpotlightViewerBottomBarLink'),{onClick:this._showForwardDialog,ref:'forwardButton'},i._("Encaminhar"));return (c('React').createElement(c('SpotlightViewer'),{onHide:this.close,open:this.state.open,rootClassName:this.props.rootClassName},c('React').createElement(c('SpotlightViewport'),{active:true,className:"_39hc",media:m,showLoadingIndicator:this.state.loading,stageDimensions:this.state.dimensions,useWidth:true},c('React').createElement(c('SpotlightViewerClose'),{onClick:this.close}),c('React').createElement(c('SpotlightViewerBottomBar'),{className:"stat_elem"},c('React').createElement(c('SpotlightViewerBottomBarGroup'),null),c('React').createElement(c('SpotlightViewerBottomBarGroup'),null,n,c('React').createElement(c('SpotlightViewerBottomBarLink'),{s:'true',href:this.props.videoURI},i._("Baixar")))))));}});f.exports=l;},null);
__d("XMessagingPhotoDownloadController",["XController"],function a(b,c,d,e,f,g){c.__markCompiled&&c.__markCompiled();f.exports=c("XController").create("\/mercury\/attachments\/photo\/",{photo_id:{type:"String",required:true}});},null);
__d('SpotlightMessagesViewer',['fbt','ActorURI','ArbiterMixin','CurrentEnvironment','MessagingForwardAttachmentDialog.react','MessagingForwardingButtonNUX.react','MessengerForwardAttachmentDialog.react','PageTransitionsRegistrar','React','ReactLayeredComponentMixin','SpotlightViewer','SpotlightViewerAutoResize','SpotlightViewerBehaviorsMixin','SpotlightViewerBottomBar','SpotlightViewerBottomBarGroup','SpotlightViewerBottomBarLink','SpotlightViewerClose','SpotlightViewerCoreMixin','SpotlightViewerDimensionMixin','SpotlightViewerPagers','SpotlightViewerPageWithKeys','SpotlightViewerThumbnailMixin','SpotlightViewport','SubscriptionsHandler','XMessagingPhotoDownloadController'],function a(b,c,d,e,f,g,h){if(c.__markCompiled)c.__markCompiled();var i=c('React').createClass({displayName:'SpotlightMessagesViewer',mixins:[c('ArbiterMixin'),c('ReactLayeredComponentMixin'),c('SpotlightViewerBehaviorsMixin'),c('SpotlightViewerCoreMixin'),c('SpotlightViewerThumbnailMixin'),c('SpotlightViewerDimensionMixin')],behaviors:[c('SpotlightViewerPageWithKeys'),c('SpotlightViewerAutoResize')],componentWillUnmount:function(){this._subscriptions&&this._subscriptions.release();this._subscriptions=null;},getViewerID:function(){return this.props.setid;},getInitialState:function(){this._subscriptions=new (c('SubscriptionsHandler'))();return {photoData:this._getInitialPhotoData(),open:true,showForward:false};},_enableSubscriptions:function(){this.props.useloadingindicator&&this._subscriptions.addSubscriptions(this.viewState.subscribe('photo_fetch',function(){return this.setState({photoData:null});}.bind(this)));},_showForwardDialog:function(){this.setState({showForward:true});this.refs.forwardNUX.close();},_hideForwardDialog:function(){this.setState({showForward:false});},renderLayers:function(){if(this.props.disableForward)return {};var j=h._("Encaminhar em mensagens separadas"),k=c('CurrentEnvironment').messengerdotcom?c('MessengerForwardAttachmentDialog.react'):c('MessagingForwardAttachmentDialog.react');return {forwardDialog:c('React').createElement(k,{attachmentID:String(this.state.photoData.id),onClose:this._hideForwardDialog,shown:this.state.showForward,title:j}),forwardButtonNUX:c('React').createElement(c('MessagingForwardingButtonNUX.react'),{contextRef:function(){return this.refs.forwardButton;}.bind(this),ref:'forwardNUX'},h._("Envie esta imagem a outras pessoas em mensagens separadas."))};},render:function(){var j=this.getMedia(),k=this.props.snapToPhoto?this.getImageDimensions():this.getStageDimensions(),l=this.props.useloadingindicator&&!this.state.photoData;c('PageTransitionsRegistrar').registerCompletionCallback(function(){if(this.state.open)this.close();return true;}.bind(this));return (c('React').createElement(c('SpotlightViewer'),{rootClassName:this.props.rootClassName,open:this.state.open,onHide:this.close},c('React').createElement(c('SpotlightViewport'),{active:false,onClick:this._onClickViewport,stageDimensions:k,media:j,showLoadingIndicator:l},c('React').createElement(c('SpotlightViewerClose'),{onClick:this.close}),this.props.disablepaging?null:c('React').createElement(c('SpotlightViewerPagers'),null),this._renderBottomBar())));},_renderBottomBar:function(){var j;if(!this.props.disableForward)j=c('React').createElement(c('SpotlightViewerBottomBarLink'),{onClick:this._showForwardDialog,ref:'forwardButton'},h._("Encaminhar"));var k=c('XMessagingPhotoDownloadController').getURIBuilder().setString('photo_id',String(this.state.photoData.id)).getURI();if(this.props.actorid)k=c('ActorURI').create(k,this.props.actorid);return (c('React').createElement(c('SpotlightViewerBottomBar'),null,c('React').createElement(c('SpotlightViewerBottomBarGroup'),null),c('React').createElement(c('SpotlightViewerBottomBarGroup'),null,j,c('React').createElement(c('SpotlightViewerBottomBarLink'),{rel:'async',ajaxify:k},h._("Baixar")))));}});f.exports=i;},null);