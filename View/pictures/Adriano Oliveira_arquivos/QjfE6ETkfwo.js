if (self.CavalryLogger) { CavalryLogger.start_js(["5QyM8"]); }

__d("ProfilePictureOverlaySurface",[],function a(b,c,d,e,f,g){c.__markCompiled&&c.__markCompiled();f.exports={GAMEFACE:"gameface",INTERN_TOOL:"intern_tool",LANDING_MSITE:"landing_msite",LANDING_NATIVE:"landing_native",LANDING_WWW:"landing_www",PHOTO_EDITOR:"photo_editor",UNIT_TEST:"unit_test",WWW_DIALOG:"www_dialog",WWW_BIRTHDAY_DIALOG:"www_birthday_dialog"};},null);
__d('lexCompare',[],function a(b,c,d,e,f,g){'use strict';if(c.__markCompiled)c.__markCompiled();function h(i){return function(j,k){var l=i(j),m=i(k);if(l<m)return -1;if(l>m)return 1;return 0;};}f.exports=h;},null);
__d('ProfilePicOverlayViewShapes',['React'],function a(b,c,d,e,f,g){if(c.__markCompiled)c.__markCompiled();var h=c('React').PropTypes,i=h.shape({id:h.string.isRequired,src:h.string.isRequired}),j=h.shape({original:h.shape({height:h.number.isRequired,uri:h.string.isRequired,width:h.number.isRequired}),id:h.string});f.exports={PHOTO_DATA:j,OVERLAY_DATA:i};},null);
__d('ProfilePictureOverlayCategory',['immutable'],function a(b,c,d,e,f,g){'use strict';var h,i;if(c.__markCompiled)c.__markCompiled();var j=c('immutable').Record,k=c('immutable').Set,l=j({description:'',id:'',loadState:null,name:'',pageIDs:new k()});h=babelHelpers.inherits(m,l);i=h&&h.prototype;function m(){h.apply(this,arguments);}f.exports=m;},null);
__d('ProfilePictureOverlayDispatcher',['ExplicitRegistrationReactDispatcher'],function a(b,c,d,e,f,g){var h,i;if(c.__markCompiled)c.__markCompiled();h=babelHelpers.inherits(j,c('ExplicitRegistrationReactDispatcher'));i=h&&h.prototype;function j(k){'use strict';i.constructor.call(this,k);this.dispatch=this.dispatch.bind(this);}f.exports=new j({strict:true});},null);
__d('XAsyncRequest',['AsyncRequest'],function a(b,c,d,e,f,g){if(c.__markCompiled)c.__markCompiled();function h(i){'use strict';this.$XAsyncRequest1=new (c('AsyncRequest'))(i);}h.prototype.setData=function(i){'use strict';this.$XAsyncRequest1.setData(i);return this;};h.prototype.setHandler=function(i){'use strict';this.$XAsyncRequest1.setHandler(i);return this;};h.prototype.setErrorHandler=function(i){'use strict';this.$XAsyncRequest1.setErrorHandler(i);return this;};h.prototype.send=function(){'use strict';this.$XAsyncRequest1.send();return this;};h.prototype.abort=function(){'use strict';this.$XAsyncRequest1.abort();};f.exports=h;},null);
__d("XProfilePictureOverlayFetchController",["XController"],function a(b,c,d,e,f,g){c.__markCompiled&&c.__markCompiled();f.exports=c("XController").create("\/profile\/picture\/overlay\/fetch\/",{category_id:{type:"Int",required:true},overlay_sizes:{type:"IntVector",required:true},page_pic_size:{type:"Int",required:true}});},null);
__d('ProfilePictureOverlayCategoryStore',['FluxMapStore','ProfilePictureOverlayCategory','ProfilePictureOverlayDispatcher','XAsyncRequest','XProfilePictureOverlayFetchController','immutable'],function a(b,c,d,e,f,g){'use strict';var h,i;if(c.__markCompiled)c.__markCompiled();var j=c('immutable').Set;h=babelHelpers.inherits(k,c('FluxMapStore'));i=h&&h.prototype;k.prototype.reduce=function(l,m){var n=m.type,o=m.payload;switch(n){case 'category_bootstrap':return this.$ProfilePictureOverlayCategoryStore1(l,o);case 'category_change':return this.$ProfilePictureOverlayCategoryStore2(l,o);case 'category_load':return this.$ProfilePictureOverlayCategoryStore3(l,o);default:return l;}};k.prototype.$ProfilePictureOverlayCategoryStore1=function(l,m){var n=m.categories;if(!n)return l;return l.withMutations(function(o){n.forEach(function(p){return (o.set(p.id,new (c('ProfilePictureOverlayCategory'))(p)));});});};k.prototype.$ProfilePictureOverlayCategoryStore2=function(l,m){var n=m.categoryID,o=l.get(n);if(!o||o.loadState)return l;var p=c('XProfilePictureOverlayFetchController').getURIBuilder().setInt('category_id',o.id).setInt('page_pic_size',m.pagePicSize).setIntVector('overlay_sizes',m.overlaySizes).getURI();new (c('XAsyncRequest'))(p).setHandler(function(q){c('ProfilePictureOverlayDispatcher').dispatch({type:'category_load',payload:q.payload});}).send();o=o.set('loadState','loading');return l.set(o.id,o);};k.prototype.$ProfilePictureOverlayCategoryStore3=function(l,m){var n=m.categories;if(!n)return l;return l.withMutations(function(o){n.forEach(function(p){var q=l.get(p.id).withMutations(function(r){r.set('description',p.description).set('loadState','loaded').set('pageIDs',new j(p.pageIDs));});o.set(p.id,q);});});};function k(){h.apply(this,arguments);}f.exports=new k(c('ProfilePictureOverlayDispatcher'));},null);
__d('ProfilePictureOverlayPage',['immutable'],function a(b,c,d,e,f,g){'use strict';var h,i;if(c.__markCompiled)c.__markCompiled();var j=c('immutable').Record,k=c('immutable').OrderedSet,l=j({id:'',name:'',overlayIDs:new k(),src:''});h=babelHelpers.inherits(m,l);i=h&&h.prototype;m.fromObject=function(n){return new m(babelHelpers['extends']({},n,{overlayIDs:new k(n.overlayIDs)}));};m.prototype.indexOfOverlayID=function(n){return this.overlayIDs.toIndexedSeq().indexOf(n);};m.prototype.getNextOverlayID=function(n){return this.$ProfilePictureOverlayPage1(n,1);};m.prototype.getPrevOverlayID=function(n){return this.$ProfilePictureOverlayPage1(n,-1);};m.prototype.$ProfilePictureOverlayPage1=function(n,o){var p=this.indexOfOverlayID(n);if(p>=0){var q=p+o;if(q<this.overlayIDs.size&&q>=0)return this.overlayIDs.toIndexedSeq().get(q);}return null;};function m(){h.apply(this,arguments);}f.exports=m;},null);
__d('ProfilePictureOverlayPageStore',['FluxMapStore','ProfilePictureOverlayDispatcher','ProfilePictureOverlayPage'],function a(b,c,d,e,f,g){'use strict';var h,i;if(c.__markCompiled)c.__markCompiled();h=babelHelpers.inherits(j,c('FluxMapStore'));i=h&&h.prototype;j.prototype.reduce=function(k,l){var m=l.type,n=l.payload;switch(m){case 'category_load':var o=n.pages;if(!o)return k;return k.withMutations(function(p){o.forEach(function(q){return (p.set(q.id,c('ProfilePictureOverlayPage').fromObject(q)));});});default:return k;}};function j(){h.apply(this,arguments);}f.exports=new j(c('ProfilePictureOverlayDispatcher'));},null);
__d('ProfilePictureOverlay',['invariant','immutable'],function a(b,c,d,e,f,g,h){'use strict';var i,j;if(c.__markCompiled)c.__markCompiled();var k=c('immutable').Map,l=c('immutable').Record,m=l({id:'',name:'',src:new k()});i=babelHelpers.inherits(n,m);j=i&&i.prototype;n.fromObject=function(o){return new n(babelHelpers['extends']({},o,{src:new k(o.src)}));};n.prototype.getSrc=function(o){var p=this.src.get(o.toString());!p?h(0):void 0;return p;};function n(){i.apply(this,arguments);}f.exports=n;},null);
__d('ProfilePictureOverlayStore',['FluxMapStore','ProfilePictureOverlay','ProfilePictureOverlayDispatcher'],function a(b,c,d,e,f,g){'use strict';var h,i;if(c.__markCompiled)c.__markCompiled();h=babelHelpers.inherits(j,c('FluxMapStore'));i=h&&h.prototype;j.prototype.reduce=function(k,l){var m=l.type,n=l.payload;switch(m){case 'category_load':var o=n.overlays;if(!o)return k;return k.withMutations(function(p){o.forEach(function(q){return (p.set(q.id,c('ProfilePictureOverlay').fromObject(q)));});});default:return k;}};function j(){h.apply(this,arguments);}f.exports=new j(c('ProfilePictureOverlayDispatcher'));},null);
__d('ProfilePictureOverlayViewStore',['FluxStore','ProfilePictureOverlayCategoryStore','ProfilePictureOverlayDispatcher','ProfilePictureOverlayPageStore','ProfilePictureOverlayStore','setImmediate','lexCompare'],function a(b,c,d,e,f,g){'use strict';var h,i;if(c.__markCompiled)c.__markCompiled();h=babelHelpers.inherits(j,c('FluxStore'));i=h&&h.prototype;function j(k){i.constructor.call(this,k);this.$ProfilePictureOverlayViewStore8=c('lexCompare')(function(l){return l.name;});this.$ProfilePictureOverlayViewStore9=c('lexCompare')(function(l){return l.name;});}j.prototype.getOverlaySizes=function(){return this.$ProfilePictureOverlayViewStore1;};j.prototype.getPagePicSize=function(){return this.$ProfilePictureOverlayViewStore2;};j.prototype.getSelectedCategoryID=function(){return this.$ProfilePictureOverlayViewStore5||null;};j.prototype.getSelectedOverlayID=function(){return this.$ProfilePictureOverlayViewStore6||null;};j.prototype.getSelectedPageID=function(){return this.$ProfilePictureOverlayViewStore7||null;};j.prototype.getCategoryComparator=function(){return this.$ProfilePictureOverlayViewStore8;};j.prototype.getPageComparator=function(){return this.$ProfilePictureOverlayViewStore9;};j.prototype.__onDispatch=function(k){var l=k.type,m=k.payload;switch(l){case 'category_bootstrap':this.$ProfilePictureOverlayViewStore10(m);break;case 'category_change':this.$ProfilePictureOverlayViewStore11(m.categoryID);break;case 'overlay_change':this.$ProfilePictureOverlayViewStore12(m.overlayID);break;case 'page_change':this.$ProfilePictureOverlayViewStore13(m.pageID);break;case 'category_load':this.$ProfilePictureOverlayViewStore14(m);break;default:break;}};j.prototype.$ProfilePictureOverlayViewStore10=function(k){c('ProfilePictureOverlayDispatcher').waitFor([c('ProfilePictureOverlayCategoryStore').getDispatchToken()]);this.$ProfilePictureOverlayViewStore1=k.overlaySizes;this.$ProfilePictureOverlayViewStore2=k.pagePicSize;this.$ProfilePictureOverlayViewStore3=k.selectedPageID;this.$ProfilePictureOverlayViewStore4=k.selectedOverlayID;this.$ProfilePictureOverlayViewStore5=k.selectedCategoryID;this.$ProfilePictureOverlayViewStore7=k.selectedPageID;this.$ProfilePictureOverlayViewStore6=k.selectedOverlayID;if(!this.$ProfilePictureOverlayViewStore5){var l=c('ProfilePictureOverlayCategoryStore').getState();if(this.$ProfilePictureOverlayViewStore8)l=l.sort(this.$ProfilePictureOverlayViewStore8);this.$ProfilePictureOverlayViewStore5=l.toIndexedSeq().get(0).id;}c('setImmediate')(function(){return c('ProfilePictureOverlayDispatcher').dispatch({type:'category_change',payload:{categoryID:this.$ProfilePictureOverlayViewStore5,overlaySizes:this.$ProfilePictureOverlayViewStore1,pagePicSize:this.$ProfilePictureOverlayViewStore2}});}.bind(this));this.__emitChange();};j.prototype.$ProfilePictureOverlayViewStore11=function(k){if(this.$ProfilePictureOverlayViewStore5!==k){this.$ProfilePictureOverlayViewStore5=k;this.$ProfilePictureOverlayViewStore7=null;this.$ProfilePictureOverlayViewStore6=null;this.__emitChange();}};j.prototype.$ProfilePictureOverlayViewStore13=function(k){if(this.$ProfilePictureOverlayViewStore7===k)return;if(!k){this.$ProfilePictureOverlayViewStore7=k;this.__emitChange();return;}var l=c('ProfilePictureOverlayPageStore').at(k),m=l.overlayIDs;if(!this.$ProfilePictureOverlayViewStore6||!m.has(this.$ProfilePictureOverlayViewStore6))this.$ProfilePictureOverlayViewStore6=m.toIndexedSeq().get(0);this.$ProfilePictureOverlayViewStore7=k;this.__emitChange();};j.prototype.$ProfilePictureOverlayViewStore14=function(k){c('ProfilePictureOverlayDispatcher').waitFor([c('ProfilePictureOverlayCategoryStore').getDispatchToken(),c('ProfilePictureOverlayPageStore').getDispatchToken(),c('ProfilePictureOverlayStore').getDispatchToken()]);var l=k.categories,m=l[0].id,n=c('ProfilePictureOverlayCategoryStore').at(m),o=n.pageIDs;if(this.$ProfilePictureOverlayViewStore3&&o.has(this.$ProfilePictureOverlayViewStore3)){this.$ProfilePictureOverlayViewStore7=this.$ProfilePictureOverlayViewStore3;var p=c('ProfilePictureOverlayPageStore').at(this.$ProfilePictureOverlayViewStore3),q=p.overlayIDs;if(this.$ProfilePictureOverlayViewStore4&&q.has(this.$ProfilePictureOverlayViewStore4))this.$ProfilePictureOverlayViewStore6=this.$ProfilePictureOverlayViewStore4;this.$ProfilePictureOverlayViewStore4=null;this.$ProfilePictureOverlayViewStore3=null;}else{var r=c('ProfilePictureOverlayPageStore').getAll(o);if(this.$ProfilePictureOverlayViewStore9)r=r.sort(this.$ProfilePictureOverlayViewStore9);this.$ProfilePictureOverlayViewStore7=r.toIndexedSeq().get(0).id;}if(this.$ProfilePictureOverlayViewStore7&&!this.$ProfilePictureOverlayViewStore6){var s=c('ProfilePictureOverlayPageStore').at(this.$ProfilePictureOverlayViewStore7),t=s.overlayIDs;this.$ProfilePictureOverlayViewStore6=t.toIndexedSeq().get(0);}};j.prototype.$ProfilePictureOverlayViewStore12=function(k){if(this.$ProfilePictureOverlayViewStore6!==k){this.$ProfilePictureOverlayViewStore6=k;this.__emitChange();}};f.exports=new j(c('ProfilePictureOverlayDispatcher'));},null);
__d('ProfilePictureOverlayFluxContainer.react',['FluxContainer','ProfilePictureOverlayDispatcher','React','immutable','ProfilePictureOverlayCategoryStore','ProfilePictureOverlayStore','ProfilePictureOverlayPageStore','ProfilePictureOverlayViewStore'],function a(b,c,d,e,f,g){'use strict';var h,i;if(c.__markCompiled)c.__markCompiled();var j=c('immutable').Map;h=babelHelpers.inherits(k,c('React').Component);i=h&&h.prototype;function k(l){i.constructor.call(this,l);this.$ProfilePictureOverlayFluxContainer1=this.$ProfilePictureOverlayFluxContainer1.bind(this);this.$ProfilePictureOverlayFluxContainer2=this.$ProfilePictureOverlayFluxContainer2.bind(this);this.$ProfilePictureOverlayFluxContainer3=this.$ProfilePictureOverlayFluxContainer3.bind(this);this.state={categories:new j(),overlays:new j(),pages:new j(),overlaySizes:null,pagePicSize:null,selectedCategoryID:null,selectedOverlayID:null,selectedPageID:null};}k.calculateState=function(){var l=c('ProfilePictureOverlayCategoryStore'),m=c('ProfilePictureOverlayStore'),n=c('ProfilePictureOverlayPageStore'),o=c('ProfilePictureOverlayViewStore'),p=o.getSelectedCategoryID(),q=o.getSelectedPageID(),r=o.getSelectedOverlayID(),s=null,t=null,u=null,v=l.getState(),w=o.getCategoryComparator();if(w)v=v.sort(w);var x=new j(),y=new j();if(p){s=l.at(p);x=n.getAll(s.pageIDs);var z=o.getPageComparator();if(z)x=x.sort(z);if(q){t=x.get(q);if(t){y=m.getAll(t.overlayIDs);if(r)u=y.get(r);}}}return {categories:v,overlays:y,pages:x,overlaySizes:o.getOverlaySizes(),pagePicSize:o.getPagePicSize(),selectedCategoryID:s&&s.id,selectedOverlayID:u&&u.id,selectedPageID:t&&t.id};};k.getStores=function(){return [c('ProfilePictureOverlayCategoryStore'),c('ProfilePictureOverlayStore'),c('ProfilePictureOverlayPageStore'),c('ProfilePictureOverlayViewStore')];};k.prototype.render=function(){var l=this.props.Component;return (c('React').createElement(l,babelHelpers['extends']({},this.state,this.props,{onCategoryChange:this.$ProfilePictureOverlayFluxContainer1,onOverlayChange:this.$ProfilePictureOverlayFluxContainer3.bind(this),onOverlayNext:this.$ProfilePictureOverlayFluxContainer4.bind(this,true),onOverlayPrev:this.$ProfilePictureOverlayFluxContainer4.bind(this,false),onPageChange:this.$ProfilePictureOverlayFluxContainer2})));};k.prototype.$ProfilePictureOverlayFluxContainer1=function(l){c('ProfilePictureOverlayDispatcher').dispatch({type:'category_change',payload:{categoryID:l,overlaySizes:this.state.overlaySizes,pagePicSize:this.state.pagePicSize}});};k.prototype.$ProfilePictureOverlayFluxContainer2=function(l){c('ProfilePictureOverlayDispatcher').dispatch({type:'page_change',payload:{pageID:l}});};k.prototype.$ProfilePictureOverlayFluxContainer3=function(l){c('ProfilePictureOverlayDispatcher').dispatch({type:'overlay_change',payload:{overlayID:l}});};k.prototype.$ProfilePictureOverlayFluxContainer4=function(l){var m=this.state,n=m.selectedPageID,o=m.selectedOverlayID;if(n&&o){var p=this.state.pages.get(n),q=l?p.getNextOverlayID(o):p.getPrevOverlayID(o);if(q)this.$ProfilePictureOverlayFluxContainer3(q);}};f.exports=c('FluxContainer').create(k,{pure:false});},null);
__d('ProfilePicOverlayLandingViewInit',['ProfilePictureOverlayDispatcher','ProfilePictureOverlayFluxContainer.react','React','ReactRenderer','ProfilePictureOverlayCategoryStore','ProfilePictureOverlayPageStore','ProfilePictureOverlayStore','ProfilePictureOverlayViewStore'],function a(b,c,d,e,f,g){'use strict';if(c.__markCompiled)c.__markCompiled();var h={init:function(i){c('ProfilePictureOverlayDispatcher').explicitlyRegisterStores([c('ProfilePictureOverlayCategoryStore'),c('ProfilePictureOverlayPageStore'),c('ProfilePictureOverlayStore'),c('ProfilePictureOverlayViewStore')]);c('ReactRenderer').renderComponent(c('React').createElement(c('ProfilePictureOverlayFluxContainer.react'),i.props),i.root);c('ProfilePictureOverlayDispatcher').dispatch({type:'category_bootstrap',payload:i.bootstrapData});}};f.exports=h;},null);
__d('ProfilePicOverlaySelectorMixin',['fbt','xuiglyph','React'],function a(b,c,d,e,f,g,h,i){if(c.__markCompiled)c.__markCompiled();var j=i({name:'chevron-left',shade:'dark',size:'medium'}),k=i({name:'chevron-left',shade:'light',size:'medium'}),l=i({name:'chevron-right',shade:'dark',size:'medium'}),m=i({name:'chevron-right',shade:'light',size:'medium'}),n=c('React').PropTypes,o={propTypes:{onLeftClick:n.func.isRequired,onRightClick:n.func.isRequired,selectedItem:n.number.isRequired,totalItems:n.number.isRequired},_canClickLeft:function(){return this.props.selectedItem>1;},_canClickRight:function(){return this.props.selectedItem<this.props.totalItems;},_onLeftClick:function(){if(this._canClickLeft())this.props.onLeftClick();},_onRightClick:function(){if(this._canClickRight())this.props.onRightClick();},_getDarkLeftGlyph:function(){return j;},_getDarkRightGlyph:function(){return l;},_getLightLeftGlyph:function(){return k;},_getLightRightGlyph:function(){return m;},_getControlText:function(){return h._("Moldura {currentItem} de {totalItems}",[h.param('currentItem',this.props.selectedItem),h.param('totalItems',this.props.totalItems)]);}};f.exports=o;},null);
__d("PhotoEditorImageData",[],function a(b,c,d,e,f,g){if(c.__markCompiled)c.__markCompiled();function h(j,k,l,m){"use strict";this.r=j;this.g=k;this.b=l;this.a=m;}h.fromArray=function(j,k){return new h(j[k],j[k+1],j[k+2],j[k+3]);};function i(j){"use strict";this.image_data=j;this.width=j.width;this.height=j.height;this.array=j.data;}i.prototype.getData=function(){"use strict";return this.image_data;};i.prototype.getWidth=function(){"use strict";return this.width;};i.prototype.getHeight=function(){"use strict";return this.height;};i.prototype.getPixel=function(j,k){"use strict";var l=this.getIndex(j,k);return h.fromArray(this.array,l);};i.prototype.setPixel=function(j,k,l){"use strict";var m=this.getIndex(j,k);this.array[m]=l.r;this.array[m+1]=l.g;this.array[m+2]=l.b;this.array[m+3]=l.a;};i.prototype.getIndex=function(j,k){"use strict";return 4*(j+k*this.width);};i.prototype.forEach=function(j){"use strict";for(var k=0;k<this.getWidth();k++)for(var l=0;l<this.getHeight();l++)this.setPixel(k,l,j(this.getPixel(k,l)));};i.Pixel=h;f.exports=i;},null);
__d('PhotoEditorCanvas',['BlobFactory','DOM','PhotoEditorImageData','PhotoResizeModeConst','Vector','sprintf'],function a(b,c,d,e,f,g){if(c.__markCompiled)c.__markCompiled();function h(i){'use strict';this._editor=i;this._canvas=c('DOM').create('canvas');this._ctx=this._canvas.getContext('2d');this._drawHandler=null;}h.prototype.setImageContent=function(i){'use strict';this._canvas.width=i.width;this._canvas.height=i.height;this._ctx.drawImage(i,0,0);return this;};h.prototype.drawGraphic=function(){'use strict';this._ctx.drawImage.apply(this._ctx,arguments);return this;};h.prototype.isBlobSupported=function(){'use strict';return !!this._canvas.toBlob;};h.prototype.getElement=function(){'use strict';return this._canvas;};h.prototype.getDimensions=function(){'use strict';return new (c('Vector'))(this._canvas.width,this._canvas.height,'document');};h.prototype.getWidth=function(){'use strict';return this._canvas.width;};h.prototype.getHeight=function(){'use strict';return this._canvas.height;};h.prototype.getContext=function(){'use strict';return this._ctx;};h.prototype.setWidth=function(i){'use strict';this._canvas.width=i;return this;};h.prototype.setHeight=function(i){'use strict';this._canvas.height=i;return this;};h.prototype.toBlob=function(i){'use strict';if(this.isBlobSupported()){this._canvas.toBlob(i);return;}this.getBlobFromDataURL(i);};h.prototype.getBlobFromDataURL=function(i){'use strict';var j=this.toDataURL('image/png'),k=j.match(/^data:(.*?);base64,/),l=k[1],m=j.substr(k[0].length),n=b.atob(m),o=new ArrayBuffer(n.length),p=new Uint8Array(o);for(var q=0;q<n.length;q++)p[q]=n.charCodeAt(q);var r=c('BlobFactory').getBlob([o],{type:l});i(r);};h.prototype.toBlobURL=function(i){'use strict';this.toBlob(function(j){i(b.URL.createObjectURL(j));});};h.prototype.toURL=function(i){'use strict';if(this.isBlobSupported()){this.toBlobURL(i);return;}i(this.toDataURL());};h.prototype.toDataURL=function(i){'use strict';return this._canvas.toDataURL(i);};h.prototype.resizedCopy=function(i,j){'use strict';var k=i.x/this.getWidth(),l=i.y/this.getHeight();if(j==c('PhotoResizeModeConst').CONTAIN){if(k>l){return this.scaledCopy(l);}else return this.scaledCopy(k);}else if(j==c('PhotoResizeModeConst').COVER){if(k<l){return this.scaledCopy(l);}else return this.scaledCopy(k);}else throw new Error('mode must be one of PhotoResizeModeConst');};h.prototype.scaledCopy=function(i){'use strict';var j=this._canvas.width*i,k=this._canvas.height*i;return new h().setWidth(j).setHeight(k).drawGraphic(this._canvas,0,0,j,k);};h.prototype.copy=function(){'use strict';return this.scaledCopy(1);};h.prototype.getPixelColor=function(i,j,k){'use strict';var l=new (c('PhotoEditorImageData'))(this.getImageData(i,j,1,1)).getPixel(0,0);if(k)l=k(l);return c('sprintf')('rgba(%s,%s,%s,%s)',l.r,l.g,l.b,l.a);};h.prototype.getImageData=function(i,j,k,l){'use strict';return this._ctx.getImageData(i||0,j||0,k||this.getWidth(),l||this.getHeight());};h.prototype.putImageData=function(i,j,k){'use strict';this._ctx.putImageData(i,j||0,k||0);return this;};h.prototype.toDataURI=function(){'use strict';return this._canvas.toDataURL('image/png');};h.prototype.toBase64=function(){'use strict';var i='data:image/png;base64,',j=this.toDataURI();return j.slice(i.length);};h.prototype.applyFilter=function(i,j){'use strict';this.putImageData(new i(this).run(j));};h.prototype.enableDrawing=function(i,j){'use strict';if(!this._editor)return;this.disableDrawing();this._drawHandler=new i(this._editor,j).start();return this._drawHandler;};h.prototype.setDrawingFillStyle=function(i){'use strict';if(!this._drawHandler)return;this._drawHandler.setFillStyle(i);};h.prototype.setFillStyle=function(i){'use strict';this._ctx.fillStyle=i;};h.prototype.disableDrawing=function(){'use strict';if(!this._drawHandler)return;this._drawHandler.stop();this._drawHandler=null;};h.prototype.clear=function(){'use strict';this._ctx.clearRect(0,0,this._canvas.width,this._canvas.height);return this;};h.prototype.crop=function(i,j,k,l){'use strict';var m=new h().setWidth(k).setHeight(l);m.drawGraphic(this._canvas,Math.max(0,i),Math.max(0,j),k,l,0,0,k,l);this.setImageContent(m.getElement());return this;};h.prototype.fillText=function(i,j,k,l,m,n){'use strict';this._ctx.font=j;if(n){this._canvas.width=this._ctx.measureText(i).width;this._ctx.font=j;}this._ctx.textBaseline='top';this._ctx.fillStyle=k;this._ctx.fillText(i,l,m);return this;};h.prototype.fillCircle=function(i,j,k,l){'use strict';this._ctx.fillStyle=l||'black';this._ctx.beginPath();this._ctx.arc(i,j,k,0,Math.PI*2);this._ctx.closePath();this._ctx.fill();};h.prototype.fillRect=function(i,j,k,l,m){'use strict';this._ctx.fillStyle=m||'black';this._ctx.fillRect(i||0,j||0,k||this._canvas.width,l||this._canvas.height);return this;};f.exports=h;},null);
__d('PhotoEditorFont',['PhotoEditorConfig','sprintf'],function a(b,c,d,e,f,g){if(c.__markCompiled)c.__markCompiled();var h=c('PhotoEditorConfig').Constants;function i(j,k,l){'use strict';this.$PhotoEditorFont1=j||h.DEFAULT_FONT_FAMILY;this.$PhotoEditorFont2=k||h.DEFAULT_FONT_SIZE;this.$PhotoEditorFont3=l||h.DEFAULT_FONT_METRIC;}i.prototype.setFamily=function(j){'use strict';this.$PhotoEditorFont1=j;};i.prototype.getFamily=function(){'use strict';return this.$PhotoEditorFont1;};i.prototype.setSize=function(j){'use strict';this.$PhotoEditorFont2=j;};i.prototype.getSize=function(){'use strict';return this.$PhotoEditorFont2;};i.prototype.setMetric=function(j){'use strict';this.$PhotoEditorFont3=j;};i.prototype.getMetric=function(){'use strict';return this.$PhotoEditorFont3;};i.prototype.toString=function(){'use strict';return c('sprintf')('%s%s %s',this.$PhotoEditorFont2,this.$PhotoEditorFont3,this.$PhotoEditorFont1);};i.prototype.copy=function(){'use strict';return new i(this.$PhotoEditorFont1,this.$PhotoEditorFont2,this.$PhotoEditorFont3);};i.getDefault=function(){return new i();};f.exports=i;},null);
__d('PhotoEditorGraphic',['cx','ArbiterMixin','PhotoEditorCanvas','CSS','DOM','Draggable','Event','PhotoEditorFont','Rect','SimpleDrag','Style','SubscriptionsHandler','UserAgent_DEPRECATED','Vector','clamp','emptyFunction','mixin','throttle'],function a(b,c,d,e,f,g,h){var i,j,k,l,m,n,o,p,q,r;if(c.__markCompiled)c.__markCompiled();var s=0,t=[],u=.7,v=.25,w=30,x=50,y=4,z=.8,aa=150,ba=315,ca=5,da=function(na){return {'-webkit-transform':na,'-moz-transform':na,'-ms-transform':na,transform:na};},ea=function(na,oa){var pa=na.x*oa.x+na.y*oa.y,qa=pa/(na.magnitude()*oa.magnitude());qa=c('clamp')(qa,-1,1);var ra=Math.acos(qa)*(180/Math.PI),sa=na.x*oa.y-oa.x*na.y;if(sa<0)ra*=-1;return ra;};function fa(){'use strict';this.root=c('DOM').create('div');c('CSS').addClass(this.root,"_5g8y");c('CSS').addClass(this.root,"_5a2z");var na=c('DOM').create('div');c('CSS').addClass(na,"_2fb7");c('CSS').addClass(na,"_5a2-");this.root.appendChild(na);this.$FreeFormEditButton1=c('emptyFunction');this.$FreeFormEditButton2=c('emptyFunction');this.$FreeFormEditButton3=c('emptyFunction');var oa=new (c('SimpleDrag'))(this.root);oa.subscribe('start',function(pa,event){if(event.button!==0)return false;this.$FreeFormEditButton4=true;c('CSS').addClass(this.root,"_2fb8");this.$FreeFormEditButton1(event);}.bind(this));oa.subscribe('update',c('throttle')(this.$FreeFormEditButton5,w,this));oa.subscribe('end',function(pa,event){this.$FreeFormEditButton4=false;c('CSS').removeClass(this.root,"_2fb8");c('Style').apply(this.root,da('translate(50%, -50%)'));this.$FreeFormEditButton2(event);}.bind(this));}fa.prototype.$FreeFormEditButton5=function(na,event){'use strict';if(!this.$FreeFormEditButton4)return;this.$FreeFormEditButton3(event);};fa.prototype.setDragStartHandler=function(na){'use strict';this.$FreeFormEditButton1=na;return this;};fa.prototype.setDragMoveHandler=function(na){'use strict';this.$FreeFormEditButton3=na;return this;};fa.prototype.setDragEndHandler=function(na){'use strict';this.$FreeFormEditButton2=na;return this;};fa.prototype.getElement=function(){'use strict';return this.root;};function ga(){'use strict';this.$DOMDrawer1=new (c('Vector'))();this.$DOMDrawer2=new XMLSerializer();this.$DOMDrawer3=undefined;}ga.prototype.setDimensions=function(na){'use strict';this.$DOMDrawer1=na;return this;};ga.prototype.render=function(na){'use strict';var oa='<svg xmlns="http://www.w3.org/2000/svg" '+'width="'+this.$DOMDrawer1.x+'" '+'height="'+this.$DOMDrawer1.y+'">'+'<foreignObject width="100%" height="100%">'+'<div xmlns="http://www.w3.org/1999/xhtml">'+this.$DOMDrawer2.serializeToString(na)+'</div>'+'</foreignObject>'+'</svg>',pa=new Image();pa.width=this.$DOMDrawer1.x;pa.height=this.$DOMDrawer1.y;pa.src=this.$DOMDrawer4(oa);return pa;};ga.prototype.$DOMDrawer4=function(na){'use strict';return 'data:image/svg+xml;base64,'+b.btoa(na);};i=babelHelpers.inherits(ha,c('mixin')(c('ArbiterMixin')));j=i&&i.prototype;function ha(na,oa,pa){'use strict';j.constructor.call(this);this.id=s++;this.photoEditor=na;t.push(this);this.root=c('DOM').create('div');this.maxWidth=oa;this.maxHeight=pa;c('CSS').addClass(this.root,"_55gm");var qa=c('DOM').create('div');c('CSS').addClass(qa,"_5g8y");c('CSS').addClass(qa,"_bbn");var ra=c('DOM').create('div');c('CSS').addClass(ra,"_2fb7");c('CSS').addClass(ra,"_bbo");qa.appendChild(ra);this.root.appendChild(qa);this.$Graphic1=c('DOM').create('div');c('CSS').addClass(this.$Graphic1,"_5lzw");this.$Graphic1.appendChild(this.root);this.$Graphic2=new (c('Vector'))(0,0,'document');this.subscriptionsHandler=new (c('SubscriptionsHandler'))();this.subscriptionsHandler.addSubscriptions(c('Event').listen(qa,'click',this.remove.bind(this)),c('Event').listen(qa,'mousedown',function(event){c('CSS').addClass(qa,"_2fb8");event.stopPropagation();}),c('Event').listen(qa,'mouseleave',function(event){c('CSS').removeClass(qa,"_2fb8");}));}ha.prototype.serialize=function(){'use strict';var na=this.getPos(),oa=this.getDimensions(),pa=this.photoEditor.getCanvasDimensions();return {type:this.constructor,left:na.x/pa.x,top:na.y/pa.y,width:oa.x/pa.x,height:oa.y/pa.y,rotation:this.getRotation()};};ha.prototype.initFromSerializedState=function(na){'use strict';var oa=this.photoEditor.getCanvasDimensions();this.setDimensions(new (c('Vector'))(na.width*oa.x,na.height*oa.y));this.setPos(new (c('Vector'))(na.left*oa.x,na.top*oa.y));this.setRotation(na.rotation);};ha.prototype.onActive=function(){'use strict';this.__draggable=this.__draggable||new (c('Draggable'))(this.$Graphic1).setUseAbsolute(true).setUseScroller(false).addHandle(this.root).setDropHandler(this.updatePos.bind(this));c('CSS').addClass(this.root,"_36w9");this.updateDraggableBoundingBox();};ha.prototype.onInactive=function(){'use strict';this.__draggable&&this.__draggable.destroy();this.__draggable=null;c('CSS').removeClass(this.root,"_36w9");};ha.prototype.updateDraggableBoundingBox=function(){'use strict';if(this.__draggable){var na=this.getDimensions(),oa=this.photoEditor.getGraphicsLayer(),pa=c('Vector').getElementPosition(oa),qa=c('Vector').getElementDimensions(oa),ra=new (c('Rect'))(pa.y-na.y,pa.x+qa.x+na.x,pa.y+qa.y+na.y,pa.x-na.x);this.__draggable.setBoundingBox(ra);}};ha.prototype.onBeforeSuddenTransformation=function(){'use strict';};ha.prototype.onAfterSuddenTransformation=function(){'use strict';};ha.prototype.getElement=function(){'use strict';return this.$Graphic1;};ha.prototype.getInitialDimensions=function(){'use strict';return new (c('Vector'))(this.maxWidth,this.maxHeight,'document').mul(v);};ha.prototype.getPos=function(){'use strict';return this.$Graphic2;};ha.prototype.getCenterPos=function(){'use strict';return this.getPos().add(this.getDimensions().div(2));};ha.prototype.getCenterCoordinates=function(){'use strict';return c('Vector').getElementPosition(this.$Graphic1).add(this.getDimensions().div(2));};ha.prototype.isRemoved=function(){'use strict';return !this.$Graphic1.parentNode;};ha.prototype.setPos=function(na){'use strict';this.$Graphic2=na;c('Style').apply(this.$Graphic1,{left:this.$Graphic2.x+'px',top:this.$Graphic2.y+'px'});};ha.prototype.updatePos=function(){'use strict';this.setPos(this.getNewPos());};ha.prototype.getNewPos=function(){'use strict';return new (c('Vector'))(c('Style').get(this.$Graphic1,'left'),c('Style').get(this.$Graphic1,'top'));};ha.prototype.setDimensions=function(na){'use strict';c('Style').apply(this.root,{width:na.x+'px',height:na.y+'px'});this.updateDraggableBoundingBox();};ha.prototype.remove=function(event){'use strict';this.subscriptionsHandler.release();c('DOM').remove(this.$Graphic1);this.photoEditor.removeGraphic(this);};ha.prototype.getDrawableObj=function(){'use strict';};ha.prototype.getDimensions=function(){'use strict';return c('Vector').getElementDimensions(this.$Graphic1);};ha.prototype.getDimensionsForDrawable=function(){'use strict';return c('Vector').getElementDimensions(this.root);};ha.prototype.getRotation=function(){'use strict';return 0;};ha.prototype.setRotation=function(na){'use strict';};ha.prototype.onDragStart=function(na){'use strict';if(c('UserAgent_DEPRECATED').firefox()){this.$Graphic3=na.layerX;this.$Graphic4=na.layerY;}else{this.$Graphic3=na.offsetX;this.$Graphic4=na.offsetY;}na.dataTransfer.setData('graphic_id',this.id);};ha.prototype.onDrop=function(na,oa){'use strict';if(this.id!==parseInt(na.dataTransfer.getData('graphic_id'),10))return;if(!oa)oa=new (c('Vector'))(0,0,'document');this.$Graphic2=new (c('Vector'))(oa.x+na.layerX-this.$Graphic3,oa.y+na.layerY-this.$Graphic4,'document');this.setPos(this.$Graphic2);na.kill();};k=babelHelpers.inherits(ia,ha);l=k&&k.prototype;function ia(na,oa,pa,qa,ra){'use strict';l.constructor.call(this,na,pa,qa);this.$ImageGraphic1=c('DOM').create('div');c('CSS').addClass(this.$ImageGraphic1,"_36wa");this.root.appendChild(this.$ImageGraphic1);this.$ImageGraphic2=pa/qa;this.$ImageGraphic3=0;this.$ImageGraphic4=0;this.$ImageGraphic5=false;this.$ImageGraphic6=new Image();this.$ImageGraphic6.crossOrigin='anonymous';c('Style').apply(this.$ImageGraphic6,{maxWidth:pa+'px',maxHeight:qa+'px'});c('CSS').addClass(this.root,"_55jn");c('CSS').addClass(this.root,'loading');this.$ImageGraphic7=c('DOM').create('div');c('CSS').addClass(this.$ImageGraphic7,"_5a2y");if(!ra)this.$ImageGraphic8();this.subscriptionsHandler.addSubscriptions(c('Event').listen(this.$ImageGraphic6,'load',this.$ImageGraphic9.bind(this)),c('Event').listen(this.root,'dragenter',c('Event').prevent),c('Event').listen(this.root,'dragover',c('Event').prevent),c('Event').listen(this.$ImageGraphic1,'mousedown',this.$ImageGraphic10.bind(this)));this.$ImageGraphic6.src=oa;this.imageURL=oa;this.setDimensions(this.getInitialDimensions());}ia.prototype.serialize=function(){'use strict';return babelHelpers['extends']({},l.serialize.call(this),{imageURL:this.imageURL});};ia.prototype.getDrawableObj=function(){'use strict';return this.$ImageGraphic6;};ia.prototype.onDragStart=function(na){'use strict';l.onDragStart.call(this,na);na.dataTransfer.setData('text/plain',this.$ImageGraphic6.src);};ia.prototype.$ImageGraphic8=function(){'use strict';var na=new fa();this.$ImageGraphic7.appendChild(na.getElement());this.root.appendChild(this.$ImageGraphic7);this.subscriptionsHandler.addSubscriptions(c('Event').listen(na.getElement(),'mousedown',function(event){event.stopPropagation();}));na.setDragStartHandler(function(){this.$ImageGraphic11=this.getCenterCoordinates();this.$ImageGraphic12();}.bind(this)).setDragMoveHandler(this.$ImageGraphic13.bind(this)).setDragEndHandler(function(){this.$ImageGraphic3=this.$ImageGraphic4;this.$ImageGraphic14();this.$ImageGraphic15();}.bind(this));this.$ImageGraphic16=na;};ia.prototype.$ImageGraphic13=function(event){'use strict';var na=c('Vector').getEventPosition(event),oa=this.$ImageGraphic11,pa=oa.distanceTo(na),qa=this.photoEditor.getCanvasDimensions(),ra=Math.max(qa.x,qa.y),sa=c('clamp')(pa*2,x,ra),ta=new (c('Vector'))(sa,sa),ua=ta.sub(this.getDimensions());if(ua.magnitude()>y){var va=this.getPos().sub(ua.div(2));this.setDimensions(ta);this.setPos(va);}var wa=na.sub(oa),xa=new (c('Vector'))(-1*Math.cos(Math.PI*3/4),-1*Math.sin(Math.PI*3/4)),ya=ea(xa,wa);this.$ImageGraphic17(ya);this.updatePos();};ia.prototype.$ImageGraphic17=function(na){'use strict';this.$ImageGraphic4=this.$ImageGraphic3+na;c('Style').apply(this.$ImageGraphic1,da('rotate('+this.$ImageGraphic4+'deg)'));this.$ImageGraphic18(ba+na);c('Style').apply(this.$ImageGraphic16.getElement(),da('translate(50%, -50%) rotate('+na+'deg)'));};ia.prototype.$ImageGraphic15=function(){'use strict';this.$ImageGraphic18(ba);};ia.prototype.$ImageGraphic14=function(){'use strict';c('Style').set(this.$ImageGraphic7,'transition','transform 0.3s cubic-bezier(.08,.98,.15,1.09)');};ia.prototype.$ImageGraphic12=function(){'use strict';c('Style').set(this.$ImageGraphic7,'transition','');};ia.prototype.$ImageGraphic18=function(na){'use strict';c('Style').apply(this.$ImageGraphic7,da('rotate('+na+'deg) '+'translateX('+this.getDimensions().x/2+'px) '+'rotate('+ -1*na+'deg)'));};ia.prototype.$ImageGraphic10=function(event){'use strict';this.photoEditor.setActiveGraphic(this);};ia.prototype.$ImageGraphic9=function(){'use strict';c('CSS').removeClass(this.root,'loading');c('CSS').addClass(this.root,'loaded');this.$ImageGraphic2=this.$ImageGraphic6.width/this.$ImageGraphic6.height;var na=new (c('PhotoEditorCanvas'))();na.setImageContent(this.$ImageGraphic6);c('Style').set(this.$ImageGraphic1,'backgroundImage','url('+na.toDataURL()+')');this.setDimensions(this.getDimensions());this.updatePos();this.inform('loaded');};ia.prototype.setPos=function(na){'use strict';l.setPos.call(this,na);var oa=this.$ImageGraphic19();c('Style').apply(this.$ImageGraphic1,{left:oa.x+'px',top:oa.y+'px'});};ia.prototype.setDimensions=function(na){'use strict';c('Style').apply(this.root,{height:na.x+'px',width:na.x+'px'});var oa=this.getImageScale(),pa=new (c('Vector'))(na.x,na.x).mul(oa.x,oa.y);c('Style').apply(this.$ImageGraphic1,{height:Math.round(pa.y)+'px',width:Math.round(pa.x)+'px'});this.$ImageGraphic15();this.updateDraggableBoundingBox();};ia.prototype.getImageScale=function(){'use strict';var na=this.$ImageGraphic2>1?new (c('Vector'))(1,1/this.$ImageGraphic2):new (c('Vector'))(this.$ImageGraphic2,1);return na.mul(u);};ia.prototype.$ImageGraphic19=function(){'use strict';var na=this.getDimensions(),oa=this.getDimensionsForDrawable();return na.sub(oa).div(2);};ia.prototype.getInitialDimensions=function(){'use strict';var na=Math.min(this.maxWidth,this.maxHeight);return new (c('Vector'))(na,na,'document').mul(v);};ia.prototype.getDimensionsForDrawable=function(){'use strict';return c('Vector').getElementDimensions(this.$ImageGraphic1);};ia.prototype.getRotation=function(){'use strict';return this.$ImageGraphic4;};ia.prototype.setRotation=function(na){'use strict';this.$ImageGraphic3=this.$ImageGraphic4=na;c('Style').apply(this.$ImageGraphic1,da('rotate('+this.$ImageGraphic3+'deg)'));};ia.prototype.onBeforeSuddenTransformation=function(){'use strict';this.$ImageGraphic12();};ia.prototype.onAfterSuddenTransformation=function(){'use strict';this.$ImageGraphic14();};m=babelHelpers.inherits(ja,ia);n=m&&m.prototype;function ja(na,oa,pa,qa,ra,sa){'use strict';n.constructor.call(this,na,pa,qa,ra,sa);this.$StickerGraphic1=oa;}ja.prototype.serialize=function(){'use strict';return babelHelpers['extends']({},n.serialize.call(this),{sticker_id:this.$StickerGraphic1});};o=babelHelpers.inherits(ka,ha);p=o&&o.prototype;function ka(na,oa,pa,qa,ra,sa,ta,ua,va,wa){'use strict';p.constructor.call(this,na,ua,va);this.$TextGraphic1=new Image();this.$TextGraphic2=qa;this.$TextGraphic3=new (c('PhotoEditorFont'))(pa);this.$TextGraphic4=null;this.$TextGraphic5=0;this.$TextGraphic6=1;this.$TextGraphic7=0;this.$TextGraphic8=new ga().setDimensions(ka.ImageSettings.DIMENSIONS);this.$TextGraphic9=sa;this.$TextGraphic10=c('DOM').create('textarea');c('Style').apply(this.$TextGraphic10,{position:'absolute',width:ka.ImageSettings.WIDTH+'px',padding:'0px',margin:'0px',border:'none',overflow:'hidden',resize:'none',background:'transparent'});var xa=c('DOM').create('div',{className:"_3bul"});c('Style').set(xa,'width',ka.ImageSettings.WIDTH+'px');xa.appendChild(this.$TextGraphic10);this.root.appendChild(xa);this.$TextGraphic11=ra||new (c('Vector'))(0,0,'document');this.focusInput=c('DOM').create('textarea',{className:"_5g78"});this.$TextGraphic12=c('DOM').create('div',{className:"_5l-2"});this.root.appendChild(this.focusInput);this.root.appendChild(this.$TextGraphic12);c('CSS').addClass(this.root,'loaded');c('CSS').addClass(this.root,"_5g79");this.subscriptionsHandler.addSubscriptions(c('Event').listen(this.$TextGraphic12,'click',function(){this.focusInput.focus();}.bind(this)),c('Event').listen(this.focusInput,'blur',function(){c('CSS').removeClass(this.root,"_5g7a");}.bind(this)),c('Event').listen(this.focusInput,'focus',function(){na.setActiveGraphic(this);c('CSS').addClass(this.root,"_5g7a");this.adjustFontSizeFit();}.bind(this)),c('Event').listen(this.focusInput,'keyup',c('throttle')(this.$TextGraphic13,50,this)));if(!wa)this.$TextGraphic14();var ya=Math.min(ua,va)*z,za=ya/ka.ImageSettings.WIDTH;this.$TextGraphic6=za;this.$TextGraphic15=new (c('Vector'))(ya,za*ka.ImageSettings.HEIGHT,'document');this.$TextGraphic15.setElementDimensions(this.root);this.updateText(oa);}ka.prototype.getInitialDimensions=function(){'use strict';return this.$TextGraphic15;};ka.prototype.$TextGraphic16=function(event){'use strict';var na=c('Vector').getEventPosition(event),oa=this.getDimensions(),pa=oa.magnitude(),qa=oa.div(pa),ra=this.$TextGraphic17,sa=ra.distanceTo(na),ta=this.photoEditor.getCanvasDimensions(),ua=Math.max(ta.x,ta.y),va=c('clamp')(sa*2,x,ua),wa=qa.mul(va),xa=wa.sub(oa);if(xa.magnitude()>y){var ya=this.getPos().sub(xa.div(2));this.setDimensions(wa);this.setPos(ya);}var za=ra.sub(na),ab=ea(oa.mul(-1,1),za);ab=(ab+360)%360;if(ab%90<ca||ab%90>90-ca)ab=Math.round(ab/90)*90;this.setRotation(ab);this.updateDraggableBoundingBox();this.updatePos();};ka.prototype.$TextGraphic14=function(){'use strict';var na=new fa();this.root.appendChild(na.getElement());this.subscriptionsHandler.addSubscriptions(c('Event').listen(na.getElement(),'mousedown',function(event){event.stopPropagation();}));na.setDragStartHandler(function(){this.$TextGraphic17=this.getCenterCoordinates();}.bind(this)).setDragMoveHandler(this.$TextGraphic16.bind(this));};ka.prototype.$TextGraphic13=function(){'use strict';var na=this.focusInput.value;if(na.length>aa)this.focusInput.value=na.substr(0,aa);this.updateText(this.focusInput.value);};ka.prototype.onActive=function(){'use strict';p.onActive.call(this);this.focusInput.focus();this.inform('focus');};ka.prototype.onInactive=function(){'use strict';p.onInactive.call(this);this.focusInput.blur();c('CSS').removeClass(this.root,"_5g7a");this.inform('blur');var na=this.$TextGraphic4.replace(/^\s*/,'').replace(/\s*$/,'');if(!na.length)this.remove();};ka.prototype.getRotation=function(){'use strict';return this.$TextGraphic5;};ka.prototype.setRotation=function(na){'use strict';this.$TextGraphic5=na;c('Style').apply(this.root,da('rotate('+this.$TextGraphic5+'deg)'));};ka.prototype.setDimensions=function(na){'use strict';this.$TextGraphic6=na.x/ka.ImageSettings.WIDTH;c('Style').apply(this.root,{width:na.x+'px',height:this.$TextGraphic6*ka.ImageSettings.HEIGHT+'px'});this.$TextGraphic18();};ka.prototype.getDrawableObj=function(){'use strict';return this.$TextGraphic1;};ka.prototype.getTextAlign=function(){'use strict';return this.$TextGraphic9;};ka.prototype.getText=function(){'use strict';return this.$TextGraphic4;};ka.prototype.getFillStyle=function(){'use strict';return this.$TextGraphic2;};ka.prototype.getFontFamily=function(){'use strict';return this.$TextGraphic3.getFamily();};ka.prototype.updateText=function(na,oa,pa){'use strict';if(pa)this.$TextGraphic2=pa;if(oa)this.$TextGraphic3.setFamily(oa);if(typeof na==='string'){na=na.substr(0,aa);if(this.$TextGraphic4!=na){this.focusInput.value=this.$TextGraphic4=na;this.$TextGraphic10.innerText=this.$TextGraphic10.textContent=na;}}c('Style').apply(this.focusInput,{textAlign:this.$TextGraphic9,color:this.$TextGraphic2,fontFamily:this.$TextGraphic3.getFamily()});c('Style').apply(this.$TextGraphic10,{textAlign:this.$TextGraphic9,font:this.$TextGraphic3.toString(),color:this.$TextGraphic2});this.adjustFontSizeFit();this.$TextGraphic1=this.$TextGraphic8.render(this.$TextGraphic10);};ka.prototype.adjustFontSizeFit=function(){'use strict';var na=ka.ImageSettings.MAX_FONT;this.$TextGraphic3.setSize(na);c('Style').apply(this.$TextGraphic10,{font:this.$TextGraphic3.toString(),height:'0px'});while(this.$TextGraphic10.scrollHeight>ka.ImageSettings.HEIGHT){this.$TextGraphic3.setSize(--na);c('Style').set(this.$TextGraphic10,'font',this.$TextGraphic3.toString());}this.$TextGraphic7=(ka.ImageSettings.HEIGHT-this.$TextGraphic10.scrollHeight)/2;c('Style').apply(this.$TextGraphic10,{marginTop:this.$TextGraphic7+'px',marginBottom:this.$TextGraphic7+'px',height:this.$TextGraphic10.scrollHeight+'px'});this.$TextGraphic18();};ka.prototype.setFontSize=function(na){'use strict';this.$TextGraphic3.setSize(na);};ka.prototype.$TextGraphic18=function(){'use strict';var na=this.$TextGraphic6,oa=this.$TextGraphic10.clientHeight;setTimeout(function(){c('Style').apply(this.focusInput,{width:ka.ImageSettings.WIDTH*na+'px',height:oa*na+'px',marginTop:this.$TextGraphic7*na+'px',marginBottom:this.$TextGraphic7*na+'px',fontSize:this.$TextGraphic3.getSize()*na+'px'});}.bind(this),0);};ka.prototype.setTextAlign=function(na){'use strict';this.$TextGraphic9=na;this.updateText();};ka.prototype.setText=function(na){'use strict';this.updateText(na);};ka.prototype.setFontFamily=function(na){'use strict';this.$TextGraphic3.setFamily(na);this.updateText();};ka.prototype.setFillStyle=function(na){'use strict';this.$TextGraphic2=na;this.updateText();};ka.prototype.getColorCoordinates=function(){'use strict';return new (c('Vector'))(this.$TextGraphic11.x,this.$TextGraphic11.y,'document');};ka.prototype.setColorCoordinates=function(na){'use strict';this.$TextGraphic11=na;};ka.prototype.serialize=function(){'use strict';return babelHelpers['extends']({},p.serialize.call(this),{text:this.$TextGraphic4,fontFamily:this.$TextGraphic3.getFamily(),fill:this.$TextGraphic2,textAlign:this.$TextGraphic9,colorCoordinates:{x:this.$TextGraphic11.x,y:this.$TextGraphic11.y}});};ka.prototype.initFromSerializedState=function(na){'use strict';this.$TextGraphic9=na.textAlign;this.$TextGraphic11=na.colorCoordinates;this.updateText(na.text,na.fontFamily,na.fill);p.initFromSerializedState.call(this,na);};ka.ImageSettings={WIDTH:200,HEIGHT:120,MAX_FONT:30,DIMENSIONS:new (c('Vector'))(200,120)};q=babelHelpers.inherits(la,ia);r=q&&q.prototype;la.prototype.remove=function(){'use strict';r.remove.call(this);b.URL.revokeObjectURL(this.imageURL);};function la(){'use strict';q.apply(this,arguments);}function ma(na,oa){if(t[na])t[na].onDrop(oa);}f.exports={Blob:la,FreeFormEditButton:fa,Graphic:ha,Image:ia,onDrop:ma,Sticker:ja,Text:ka};},null);
__d('PhotoBrowserLink.react',['AsyncDialog','AsyncRequest','Event','Link.react','Parent','React','tidyEvent'],function a(b,c,d,e,f,g){'use strict';var h,i;if(c.__markCompiled)c.__markCompiled();var j='data-photo-id';h=babelHelpers.inherits(k,c('React').Component);i=h&&h.prototype;function k(l){i.constructor.call(this,l);this.$PhotoBrowserLink1=this.$PhotoBrowserLink1.bind(this);}k.prototype.render=function(){return (c('React').createElement(c('Link.react'),babelHelpers['extends']({},this.props,{href:'#',onClick:this.$PhotoBrowserLink1}),this.props.children));};k.prototype.$PhotoBrowserLink1=function(){c('AsyncDialog').send(new (c('AsyncRequest'))(this.props.dialogURI),function(l){return c('tidyEvent')(c('Event').listen(l.getRoot(),'click',this.$PhotoBrowserLink2.bind(this,l)));}.bind(this));};k.prototype.$PhotoBrowserLink2=function(l,event){var m=c('Parent').byAttribute(event.getTarget(),j);if(m){event.kill();this.props.onPhotoChoose(m.getAttribute(j));l.finishHide();}};f.exports=k;},null);
__d('ProfilePicCanvas',['PhotoEditorCanvas'],function a(b,c,d,e,f,g){if(c.__markCompiled)c.__markCompiled();function h(i){'use strict';this.$ProfilePicCanvas1=new (c('PhotoEditorCanvas'))();this.$ProfilePicCanvas1.setImageContent(i);this.$ProfilePicCanvas2=[];this.$ProfilePicCanvas3=1;}h.prototype.toBlob=function(i){'use strict';this.$ProfilePicCanvas4().toBlob(i);};h.prototype.addGraphic=function(i,j){'use strict';i.setPos(j);this.$ProfilePicCanvas2.push(i);};h.prototype.setResizeFactor=function(i){'use strict';this.$ProfilePicCanvas3=i;return this;};h.prototype.$ProfilePicCanvas5=function(){'use strict';return window.devicePixelRatio||1;};h.prototype.$ProfilePicCanvas6=function(i){'use strict';return i.webkitBackingStorePixelRatio||i.mozBackingStorePixelRatio||i.msBackingStorePixelRatio||i.oBackingStorePixelRatio||i.backingStorePixelRatio||1;};h.prototype.$ProfilePicCanvas4=function(){'use strict';var i=this.$ProfilePicCanvas1.getWidth(),j=new (c('PhotoEditorCanvas'))(),k=j.getContext();j.setImageContent(this.$ProfilePicCanvas1.getElement());var l=this.$ProfilePicCanvas5(),m=this.$ProfilePicCanvas6(k),n=l/m;if(n!==1){j=j.scaledCopy(n);k=j.getContext();k.scale(n,n);k.save();}var o,p;for(var q=0;q<this.$ProfilePicCanvas2.length;q++){o=this.$ProfilePicCanvas2[q];p=o.getPos();k.save();k.translate(p.x,p.y);j.drawGraphic(o.getDrawableObj(),0,0,i*this.$ProfilePicCanvas3,i*this.$ProfilePicCanvas3);k.restore();}return j;};f.exports=h;},null);
__d('ProfilePictureCustomExpirationStrings',['fbt','DateConsts'],function a(b,c,d,e,f,g,h){if(c.__markCompiled)c.__markCompiled();var i={BUTTON_SET:h._("Definir"),DIALOG_TITLE:h._("Voltar para a foto do perfil anterior em"),ERROR_NOTICE:h._("Selecione um hor\u00e1rio de t\u00e9rmino que esteja pelo menos 1 hora no futuro."),getExpirationString:function(j){if(j<c('DateConsts').SEC_PER_DAY){return this._getHourString(j);}else if(j<c('DateConsts').SEC_PER_WEEK){return this._getDayString(j);}else return this._getWeekString(j);},_getHourString:function(j){var k=Math.round(j/c('DateConsts').SEC_PER_HOUR);return h._({"s":"{numHours} hora","p":"{numHours} horas"},[h.param('numHours',k),h['enum'](k===1?'s':'p',{s:' Hour',p:' Hours'})]);},_getDayString:function(j){var k=Math.round(j/c('DateConsts').SEC_PER_DAY);return h._({"s":"{numDays} dia","p":"{numDays} dias"},[h.param('numDays',k),h['enum'](k===1?'s':'p',{s:' Day',p:' Days'})]);},_getWeekString:function(j){var k=Math.round(j/c('DateConsts').SEC_PER_WEEK);return h._({"s":"{numWeeks} semana","p":"{numWeeks} semanas"},[h.param('numWeeks',k),h['enum'](k===1?'s':'p',{s:' Week',p:' Weeks'})]);}};f.exports=i;},null);
__d('ProfilePicCustomExpirationDialog.react',['cx','DatePickerRestraints','DateConsts','ProfilePictureCustomExpirationStrings','React','XUIDateTimePickerUtils','XUIDateTimePicker.react','XUIDialog.react','XUIDialogBody.react','XUIDialogButton.react','XUIDialogCancelButton.react','XUIDialogFooter.react','XUIDialogTitle.react','XUINotice.react'],function a(b,c,d,e,f,g,h){if(c.__markCompiled)c.__markCompiled();var i=c('React').PropTypes,j=520,k=c('React').createClass({displayName:'ProfilePicCustomExpirationDialog',propTypes:{earliestDateAllowed:i.instanceOf(Date).isRequired,initialDate:i.instanceOf(Date),onCancel:i.func,onSubmit:i.func.isRequired,shown:i.bool.isRequired},getDefaultProps:function(){return {earliestDateAllowed:new Date(Date.now()+c('DateConsts').MS_PER_HOUR),initialDate:new Date(Date.now()+7*c('DateConsts').MS_PER_DAY)};},getInitialState:function(){return {date:this.props.initialDate};},render:function(){var l=this.state.date.getTime(),m=!!(l>=this.props.earliestDateAllowed.getTime()),n=new Date(this.props.earliestDateAllowed.getTime()),o=n.getTimezoneOffset()/c('DateConsts').MIN_PER_HOUR*-1,p=this._getStartDateRestraints(n,o);return (c('React').createElement(c('XUIDialog.react'),{layerHideOnBlur:false,shown:this.props.shown,width:j},c('React').createElement(c('XUIDialogTitle.react'),{showCloseButton:false},c('ProfilePictureCustomExpirationStrings').DIALOG_TITLE),c('React').createElement(c('XUIDialogBody.react'),null,c('React').createElement(c('XUIDateTimePicker.react'),{className:"_3-8x",date:this.state.date,dateRestraints:p,onChange:function(q){return this.setState({date:q});}.bind(this)}),this._renderErrorNotice(m)),c('React').createElement(c('XUIDialogFooter.react'),null,c('React').createElement(c('XUIDialogCancelButton.react'),{onClick:this.props.onCancel}),c('React').createElement(c('XUIDialogButton.react'),{action:'confirm',disabled:!m,label:c('ProfilePictureCustomExpirationStrings').BUTTON_SET,onClick:function(){return this.props.onSubmit(this.state.date);}.bind(this),use:'confirm'}))));},_renderErrorNotice:function(l){return (c('React').createElement(c('XUINotice.react'),{className:"_3-8x"+(l?' '+"hidden_elem":''),use:'warn'},c('ProfilePictureCustomExpirationStrings').ERROR_NOTICE));},_getStartDateRestraints:function(l,m){var n=c('XUIDateTimePickerUtils').getOffsetUIDate(l,m),o=this._normalizeDate(n);return [c('DatePickerRestraints').enforceDateIsNoEarlierThan(o)];},_normalizeDate:function(l){return new Date(Date.UTC(l.getUTCFullYear(),l.getUTCMonth(),l.getUTCDate()));}});f.exports=k;},null);
__d('ProfilePicCropViewerStrings',['fbt'],function a(b,c,d,e,f,g,h){if(c.__markCompiled)c.__markCompiled();var i={BUTTON_CANCEL:h._("Cancelar"),BUTTON_CLOSE:h._("Fechar"),BUTTON_EDIT:h._("Editar"),BUTTON_MAKE_TEMPORARY:h._("Tornar tempor\u00e1rio"),BUTTON_SAVE:h._("Salvar"),CAPTION_INPUT_PLACEHOLDER:h._("Adicionar uma descri\u00e7\u00e3o..."),CROP_AND_SAVE:h._("Cortar foto"),CROP_EXPLANATION:h._("Corte esta foto antes de salv\u00e1-la como sua foto do perfil."),CROP_INSTRUCTIONS:h._("Mova a caixa para onde voc\u00ea deseja cortar sua foto. Arraste os cantos\n        para dentro ou para fora para ajustar o tamanho."),CROP_SAVING:h._("Salvando foto do perfil..."),LEAVE_WARNING_BODY:h._("As altera\u00e7\u00f5es que voc\u00ea fez em sua foto do perfil n\u00e3o ser\u00e3o salvas se voc\u00ea fechar esta caixa de di\u00e1logo."),LEAVE_WARNING_CANCEL:h._("Ficar nesta P\u00e1gina"),LEAVE_WARNING_OK:h._("Sair desta P\u00e1gina"),LEAVE_WARNING_TITLE:h._("Altera\u00e7\u00f5es n\u00e3o salvas"),LEAVE_WARNING_UNLOAD:h._("As altera\u00e7\u00f5es que voc\u00ea fez em sua foto do perfil n\u00e3o foram salvas."),LOADING:h._("Carregando..."),PREV_PHOTO_ADJUST_THUMBNAIL:h._("Esta foto \u00e9 uma foto do perfil usada anteriormente."),FRAME_PREVENTS_CROP:h._("N\u00e3o \u00e9 poss\u00edvel recortar a foto ap\u00f3s adicionar uma moldura."),PREVIOUS_PIC:h._("Esta foto \u00e9 uma foto do perfil usada anteriormente. Deseja us\u00e1-la novamente?"),PROFILE_PIC_VISIBILITY:h._("Sua foto do perfil atual \u00e9 sempre p\u00fablica."),TEMPORARY_PROFILE_PIC_CONTROL:h._("Reverter para a foto anterior do perfil"),TEMPORARY_OPTION_ONE_HOUR:h._("1 hora"),TEMPORARY_OPTION_ONE_DAY:h._("1 dia"),TEMPORARY_OPTION_ONE_WEEK:h._("1 semana"),TEMPORARY_OPTION_NEVER:h._("Nunca"),TEMPORARY_OPTION_CUSTOM:h._("Personalizado"),HIDDEN_FROM_NEWS_FEED:h._("As altera\u00e7\u00f5es n\u00e3o aparecer\u00e3o no Feed de Not\u00edcias."),SAVE_AND_CROP:h._("Cortar e salvar"),SAVED_BODY:h._("Sua foto do perfil foi salva com sucesso."),SAVED_TITLE:h._("Foto do perfil salva"),SET_THUMBNAIL:h._("Definir miniatura"),SKIP_CROP:h._("Pular o corte"),SKIP_CROP_EXPLANATION:h._("Salve toda a foto como sua foto do perfil e defina a miniatura."),THUMBNAIL_MODE_EXPLANATION:h._("Toda a foto ser\u00e1 salva como sua foto do perfil. Reposicione a foto para definir a miniatura."),UMG_TITLE:h._("Criar foto do perfil"),UPLOADING:h._("Carregando..."),USE_AS_PROFILE_PICTURE:h._("Usar como foto do perfil"),SMALL_PHOTO_WARNING:h._("Essa foto \u00e9 pequena e sua foto do perfil n\u00e3o ficar\u00e1 muito n\u00edtida."),ZOOM_WARNING:h._("Aproximar desta forma far\u00e1 com que sua foto do perfil fique menos n\u00edtida.")};f.exports=i;},null);
__d('ProfilePicExpirationSelector.react',['cx','DateConsts','ProfilePicCropViewerStrings','ProfilePictureCustomExpirationStrings','React','ReactComponentWithPureRenderMixin','Layout.react','ProfilePicCustomExpirationDialog.react','XUIGrayText.react','XUISelector.react','joinClasses'],function a(b,c,d,e,f,g,h){if(c.__markCompiled)c.__markCompiled();var i=c('Layout.react').Column,j=c('Layout.react').FillColumn,k=c('XUISelector.react').Option,l=-1,m=-2,n={HOUR:c('DateConsts').SEC_PER_HOUR,DAY:c('DateConsts').SEC_PER_DAY,WEEK:c('DateConsts').SEC_PER_WEEK,NEVER:l,CUSTOM:m},o=c('React').PropTypes,p=c('React').createClass({displayName:'ProfilePicExpirationSelector',mixins:[c('ReactComponentWithPureRenderMixin')],propTypes:{defaultValue:o.number.isRequired,onChange:o.func.isRequired,showCustomOption:o.bool},getInitialState:function(){return {customExpirationString:c('ProfilePicCropViewerStrings').TEMPORARY_OPTION_CUSTOM,showCustomExpirationDialog:false,value:this.props.defaultValue};},render:function(){var q=null,r=null;if(this.props.showCustomOption){q=c('React').createElement(k,{onclick:function(){return this.setState({showCustomExpirationDialog:true});}.bind(this),value:n.CUSTOM},this.state.customExpirationString);r=c('React').createElement(c('ProfilePicCustomExpirationDialog.react'),{onCancel:this._onCustomDateCancel,onSubmit:this._onCustomDateSubmit,shown:this.state.showCustomExpirationDialog});}return (c('React').createElement(c('Layout.react'),{className:c('joinClasses')("_31ka",this.props.className)},c('React').createElement(j,{className:"_3m_e"},c('React').createElement(c('XUIGrayText.react'),{className:"_3-91",shade:'medium',size:'small'},c('ProfilePicCropViewerStrings').TEMPORARY_PROFILE_PIC_CONTROL)),c('React').createElement(i,null,c('React').createElement(c('XUISelector.react'),{defaultValue:this.props.defaultValue,onChange:this._changeHandler,size:'large',value:this.state.value},c('React').createElement(k,{value:n.HOUR},c('ProfilePicCropViewerStrings').TEMPORARY_OPTION_ONE_HOUR),c('React').createElement(k,{value:n.DAY},c('ProfilePicCropViewerStrings').TEMPORARY_OPTION_ONE_DAY),c('React').createElement(k,{value:n.WEEK},c('ProfilePicCropViewerStrings').TEMPORARY_OPTION_ONE_WEEK),c('React').createElement(k,{value:n.NEVER},c('ProfilePicCropViewerStrings').TEMPORARY_OPTION_NEVER),q)),r));},_changeHandler:function(q){this.setState({value:q.value});if(this.props.showCustomOption&&q.value===m){this.setState({showCustomExpirationDialog:true});}else this.props.onChange(q.value);},_onCustomDateSubmit:function(q){var r=Math.round((q.getTime()-Date.now())/c('DateConsts').MS_PER_SEC);this.setState({customExpirationString:c('ProfilePictureCustomExpirationStrings').getExpirationString(r),showCustomExpirationDialog:false,value:m});this.props.onChange(r);},_onCustomDateCancel:function(){var q=Object.keys(n).map(function(s){return n[s];}),r=q.indexOf(this.props.defaultValue)===-1?n.CUSTOM:this.props.defaultValue;this.setState({showCustomExpirationDialog:false,value:r});}});f.exports=p;},null);
__d("ProfilePicMenuDialogThumbnailMixin",[],function a(b,c,d,e,f,g){if(c.__markCompiled)c.__markCompiled();var h={getThumbnailCoordinates:function(i,j){return {endX:Math.abs((i.x+i.width)/j.width),endY:Math.abs((i.y+i.height)/j.height),startX:Math.abs(i.x/j.width),startY:Math.abs(i.y/j.height)};}};f.exports=h;},null);
__d('ProfilePicOverlay.react',['cx','React','ReactComponentWithPureRenderMixin','Image.react','joinClasses'],function a(b,c,d,e,f,g,h){if(c.__markCompiled)c.__markCompiled();var i=c('React').PropTypes,j=c('React').createClass({displayName:'ProfilePicOverlay',mixins:[c('ReactComponentWithPureRenderMixin')],propTypes:{src:i.string.isRequired},render:function(){return (c('React').createElement(c('Image.react'),babelHelpers['extends']({},this.props,{className:c('joinClasses')(this.props.className,"_4i_g")})));}});f.exports=j;},null);
__d('ProfilePicOverlayCategorySelector.react',['React','ReactComponentWithPureRenderMixin','immutable','XUISelector.react'],function a(b,c,d,e,f,g){if(c.__markCompiled)c.__markCompiled();var h=c('immutable').Map,i=c('XUISelector.react').Option,j=c('React').PropTypes,k=c('React').createClass({displayName:'ProfilePicOverlayCategorySelector',mixins:[c('ReactComponentWithPureRenderMixin')],propTypes:{categories:j.instanceOf(h).isRequired,defaultValue:j.string,onChange:j.func.isRequired},render:function(){var l=this.props.categories.map(function(m){return (c('React').createElement(i,{key:m.id,value:m.id},m.name));});return (c('React').createElement(c('XUISelector.react'),babelHelpers['extends']({},this.props,{size:'large'}),l.toArray()));}});f.exports=k;},null);
__d('ProfilePicOverlayChangePictureLink.react',['cx','fbt','xuiglyph','Image.react','PhotoBrowserLink.react','React','XUIText.react','joinClasses'],function a(b,c,d,e,f,g,h,i,j){var k,l;if(c.__markCompiled)c.__markCompiled();k=babelHelpers.inherits(m,c('React').Component);l=k&&k.prototype;m.prototype.render=function(){'use strict';return (c('React').createElement(c('PhotoBrowserLink.react'),babelHelpers['extends']({},this.props,{className:c('joinClasses')(this.props.className,"_3xf-")}),c('React').createElement(c('Image.react'),{className:"_3-8_",src:j({name:'album',size:'small'})}),c('React').createElement(c('XUIText.react'),{size:'small'},i._("Mudar foto"))));};function m(){'use strict';k.apply(this,arguments);}f.exports=m;},null);
__d('OverlayAccentCheckmark.react',['ix','cx','React','ReactComponentWithPureRenderMixin','Image.react','fbglyph','joinClasses'],function a(b,c,d,e,f,g,h,i){if(c.__markCompiled)c.__markCompiled();var j=c('React').createClass({displayName:'OverlayAccentCheckmark',mixins:[c('ReactComponentWithPureRenderMixin')],render:function(){return (c('React').createElement(c('Image.react'),{className:c('joinClasses')(this.props.className,"_590w"),src:h("\/images\/assets_DO_NOT_HARDCODE\/fb_glyphs\/checkmark-solid_20_accent-blue.png")}));}});f.exports=j;},null);
__d('ProfilePicOverlaySelectableItem.react',['cx','Keys','Link.react','OverlayAccentCheckmark.react','ProfilePicOverlayPreview.react','React','Tooltip','joinClasses'],function a(b,c,d,e,f,g,h){var i,j;if(c.__markCompiled)c.__markCompiled();i=babelHelpers.inherits(k,c('React').Component);j=i&&i.prototype;k.prototype.render=function(){'use strict';var l=this.props,m=l.selected,n=l.name,o=null;if(m)o=c('React').createElement(c('OverlayAccentCheckmark.react'),{className:"_5ylr"});var p=null;if(n)p=c('Tooltip').propsFor(this.props.name);return (c('React').createElement(c('Link.react'),babelHelpers['extends']({},this.props,{className:c('joinClasses')(this.props.className,"_5yls"+(m?' '+"_5ynp":'')),'data-tooltip-alignH':'center','data-tooltip-position':'below',onKeyDown:this.$ProfilePicOverlaySelectableItem1.bind(this)},p),c('React').createElement(c('ProfilePicOverlayPreview.react'),{className:"_5ynq",height:this.props.size,overlaySrc:this.props.src,width:this.props.size}),o));};k.prototype.$ProfilePicOverlaySelectableItem1=function(event){'use strict';if(event.keyCode!==c('Keys').RETURN||event.keyCode!==c('Keys').SPACE)return true;this.props.onClick();return false;};function k(){'use strict';i.apply(this,arguments);}f.exports=k;},null);
__d('ProfilePicOverlayGridSelector.react',['cx','React','ReactComponentWithPureRenderMixin','ReactDOM','CenteredContainer.react','Grid.react','ProfilePicOverlayCategorySelector.react','ProfilePicOverlaySelectableItem.react','XUISpinner.react'],function a(b,c,d,e,f,g,h){if(c.__markCompiled)c.__markCompiled();var i=c('Grid.react').GridItem,j=c('React').PropTypes,k=72,l=c('React').createClass({displayName:'ProfilePicOverlayGridSelector',mixins:[c('ReactComponentWithPureRenderMixin')],propTypes:{categories:j.object.isRequired,numGridCols:j.number,onCategorySelectorChange:j.func.isRequired,onPageClickHandler:j.func.isRequired,pages:j.object.isRequired,panelHeight:j.number.isRequired,panelPadding:j.number.isRequired,selectedCategoryID:j.string,selectedPageID:j.string},getDefaultProps:function(){return {numGridCols:4,panelPadding:0};},render:function(){var m=null;if(this.props.categories.size>1&&this.props.selectedCategoryID)m=c('React').createElement('div',{className:"_5peb _2pia _2pif"},c('React').createElement(c('ProfilePicOverlayCategorySelector.react'),{categories:this.props.categories,defaultValue:this.props.selectedCategoryID,onChange:this.props.onCategorySelectorChange}));var n=void 0;if(this.props.pages.size>0){n=c('React').createElement(c('Grid.react'),{cols:this.props.numGridCols,spacing:"_2phz"},this.props.pages.map(function(p){return this._getGridItem(p);}.bind(this)).toArray());}else n=c('React').createElement(c('CenteredContainer.react'),{fullHeight:true,horizontal:true,vertical:true},c('React').createElement(c('XUISpinner.react'),{size:'large'}));var o=this.props.panelHeight-this.props.panelPadding;return (c('React').createElement('div',null,m,c('React').createElement('div',{className:"_5pec",style:{height:o,maxHeight:o}},n)));},_getGridItem:function(m){var n=m.id===this.props.selectedPageID,o=null;if(n)o=function(p){if(p!==null)c('ReactDOM').findDOMNode(p).scrollIntoView();};return (c('React').createElement(i,{key:m.id},c('React').createElement(c('ProfilePicOverlaySelectableItem.react'),{name:m.name,onClick:function(){return this.props.onPageClickHandler(m.id);}.bind(this),ref:o,selected:m.id===this.props.selectedPageID,size:k,src:m.src})));}});f.exports=l;},null);
__d('ProductionPromptShapes',['React'],function a(b,c,d,e,f,g){if(c.__markCompiled)c.__markCompiled();var h=c('React').PropTypes,i=h.shape({promptID:h.string.isRequired,promptType:h.string.isRequired,trackingString:h.string.isRequired});f.exports={LOGGING_DATA:i};},null);
__d('ProfileWizardModalManager',['Arbiter','ProfileWizardUIEvents','TimelineProfilePicConfig','tidyEvent'],function a(b,c,d,e,f,g){if(c.__markCompiled)c.__markCompiled();function h(){'use strict';this.setIsOpen(false);}h.prototype.setIsOpen=function(i){'use strict';this.$ProfileWizardModalManager1=i;return this;};h.prototype.isOpen=function(){'use strict';return this.$ProfileWizardModalManager1;};h.prototype.informProfilePictureUploaded=function(i){'use strict';c('Arbiter').inform(c('ProfileWizardUIEvents').PROFILE_PIC_UPLOADED,i);};h.prototype.informStepEdited=function(i){'use strict';c('Arbiter').inform(c('ProfileWizardUIEvents').STEP_EDITED+'-'+i);};h.prototype.subscribeProfilePictureUploaded=function(i){'use strict';c('tidyEvent')([c('Arbiter').subscribe(c('ProfileWizardUIEvents').PROFILE_PIC_UPLOADED,i),c('Arbiter').subscribe(c('TimelineProfilePicConfig').success,i)]);};h.prototype.subscribeStepEdited=function(i,j){'use strict';c('tidyEvent')(c('Arbiter').subscribe(c('ProfileWizardUIEvents').STEP_EDITED+'-'+i,j));};h.prototype.subscribeOnceProfilePictureUploaded=function(i){'use strict';c('tidyEvent')([c('Arbiter').subscribeOnce(c('ProfileWizardUIEvents').PROFILE_PIC_UPLOADED,i),c('Arbiter').subscribeOnce(c('TimelineProfilePicConfig').success,i)]);};f.exports=new h();},null);
__d('ProfilePicCropViewerMixin',['AsyncResponse','DialogX','DOM','Event','LayerDestroyOnHide','PhotoEditorGraphic','ProfilePicCanvas','ProfilePicCropViewerStrings','ProfilePicMenuDialogThumbnailMixin','ProfilePictureFlowLogging','ProfileWizardModalManager','React','Run','TimelineURI','Vector','XProfilePicSaver','XUIDialogBody.react','XUIDialogButton.react','XUIDialogFooter.react','XUIDialogTitle.react','tidyEvent'],function a(b,c,d,e,f,g){if(c.__markCompiled)c.__markCompiled();var h=c('PhotoEditorGraphic').Sticker,i=c('React').PropTypes,j=360,k={propTypes:{method:i.string,source:i.string,uploadRequest:i.object,warnOnClose:i.bool.isRequired},getDefaultProps:function(){return {warnOnClose:true};},componentDidMount:function(){this._preventClose=true;this._unloadListener=c('Run').onBeforeUnload(function(){if(!this._shouldAllowClose()&&this.props.warnOnClose)return c('ProfilePicCropViewerStrings').LEAVE_WARNING_UNLOAD;return null;}.bind(this),true);this._logFlowStep(c('ProfilePictureFlowLogging').step.VIEWER_INIT);},componentDidUpdate:function(l,m){if(!m.photoData&&this.state.photoData)this._logFlowStep(this.state.photoData.previousprofilepic?c('ProfilePictureFlowLogging').step.PREVIOUS_PIC_INIT:c('ProfilePictureFlowLogging').step.CROP);},componentWillUnmount:function(){this._warningDialog&&this._warningDialog.destroy();this._warningDialog=null;this._unloadListener&&this._unloadListener.remove();this._unloadListener=null;},_forceClose:function(l){this._preventClose=false;this.close();this._logFlowStep(l||c('ProfilePictureFlowLogging').step.CANCEL);},handleCancel:function(){if(this.props.cancelCallback)this.props.cancelCallback();if(!this.props.warnOnCancel||this._shouldAllowClose()){this._forceClose();return;}this._showCloseWarning();},handleUploadCancel:function(){this.props.uploadRequest&&this.props.uploadRequest.abort();this._forceClose(c('ProfilePictureFlowLogging').step.UPLOAD_CANCEL);},handlePositionSave:function(){var l=this._prepareSaver(),m=this.getCaption();l.saveAsProfilePicWithPosition(this.getThumbnailCoordinates(this.getCropArea(),this.getPhotoSize()),m);},handleSetThumbnailSave:function(){this.handlePositionSave();this._logFlowStep(c('ProfilePictureFlowLogging').step.SKIP_CROP);},handleCropSave:function(){var l=this.getCropArea(),m=this.getPhotoSize(),n=this.getCaption(),o=this._prepareSaver(),p=this.getOverlaySourceObjectID(),q=function(t){return o.saveCroppedProfilePic({x:l.x/m.width,y:l.y/m.height,width:l.width/m.width,height:l.height/m.height},t,n,p);},r=this.getOverlayData();if(!r){q();return;}var s=this._getImage(m.uri);c('Event').listen(s,'load',function(){var t=new (c('ProfilePicCanvas'))(s),u=new h(null,r.id,r.src,m.width,m.height);u.subscribe('loaded',function(){t.addGraphic(u,new (c('Vector'))(l.x,l.y));t.setResizeFactor(l.width/m.width);r.canvas=t;q(r);});});},_getImage:function(l){return c('DOM').create('img',{crossOrigin:'anonymous',src:l});},_prepareSaver:function(){this.setState({savingMode:true});this._preventClose=false;var l=this.state.expirationTime;if(l<=0)l=null;var m=new (c('XProfilePicSaver'))(this.state.photoData.id,this.props.profileID,l).setFlowType(this.getFlowType());c('tidyEvent')([m.subscribe('success',this._savingSuccess),m.subscribe('error',this._savingError)]);this.props.method&&m.setProfilePhotoMethod(this.props.method);this.props.source&&m.setProfilePhotoSource(this.props.source);return m;},_logFlowStep:function(l){c('ProfilePictureFlowLogging').setFlowType(this.getFlowType()).setSource(this.props.source).log(l);},_savingSuccess:function(l,m){if(this.props.successCallback){this.props.successCallback(m);this.close();return;}if(c('ProfileWizardModalManager').isOpen()){c('ProfileWizardModalManager').informProfilePictureUploaded({response:m});this.close();return;}var n=new (c('DialogX'))({addedBehaviors:[c('LayerDestroyOnHide')],width:j,xui:true},c('React').createElement('div',null,c('React').createElement(c('XUIDialogTitle.react'),{showCloseButton:false},c('ProfilePicCropViewerStrings').SAVED_TITLE),c('React').createElement(c('XUIDialogBody.react'),null,c('ProfilePicCropViewerStrings').SAVED_BODY)));n.subscribeOnce('aftershow',this.close);n.show();c('TimelineURI').goToProfileID(this.props.profileID);},_savingError:function(l,m){this._preventClose=true;this.setState({savingMode:false});c('AsyncResponse').defaultErrorHandler(m);this.inform('save_error',m);if(this.props.errorCallback)this.props.errorCallback();},_shouldAllowClose:function(){return !this._preventClose;},_showCloseWarning:function(){if(!this._warningDialog)this._warningDialog=new (c('DialogX'))({modal:true,width:j,xui:true},c('React').createElement('div',null,c('React').createElement(c('XUIDialogTitle.react'),null,c('ProfilePicCropViewerStrings').LEAVE_WARNING_TITLE),c('React').createElement(c('XUIDialogBody.react'),null,c('ProfilePicCropViewerStrings').LEAVE_WARNING_BODY),c('React').createElement(c('XUIDialogFooter.react'),null,c('React').createElement(c('XUIDialogButton.react'),{action:'cancel',label:c('ProfilePicCropViewerStrings').LEAVE_WARNING_CANCEL}),c('React').createElement(c('XUIDialogButton.react'),{action:'cancel',onClick:function(){return this._forceClose();}.bind(this),label:c('ProfilePicCropViewerStrings').LEAVE_WARNING_OK,use:'confirm'}))));this._warningDialog.show();}};f.exports=Object.assign(k,c('ProfilePicMenuDialogThumbnailMixin'));},null);
__d('ProfilePicOverlayPhotoPlaceholder.react',['ix','cx','fbt','Image.react','React','PhotoBrowserLink.react','XUIText.react','fbglyph','joinClasses'],function a(b,c,d,e,f,g,h,i,j){var k,l;if(c.__markCompiled)c.__markCompiled();k=babelHelpers.inherits(m,c('React').Component);l=k&&k.prototype;m.prototype.render=function(){'use strict';return (c('React').createElement(c('PhotoBrowserLink.react'),{className:c('joinClasses')(this.props.className,"_-ly"),dialogURI:this.props.dialogURI,onPhotoChoose:this.props.onPhotoChoose,style:{height:this.props.dimension,width:this.props.dimension}},c('React').createElement('div',{className:"_-lz"},c('React').createElement(c('Image.react'),{className:"_-l_",src:h("\/images\/assets_DO_NOT_HARDCODE\/fb_glyphs\/photo-album_20_bluegray-40.png")}),c('React').createElement(c('XUIText.react'),{size:'xlarge'},j._("Selecione uma foto")))));};function m(){'use strict';k.apply(this,arguments);}f.exports=m;},null);
__d('ProfilePicOverlaySelector.react',['cx','Layout.react','ProfilePicOverlaySelectorMixin','React','ReactComponentWithPureRenderMixin','Image.react','XUIText.react'],function a(b,c,d,e,f,g,h){if(c.__markCompiled)c.__markCompiled();var i=c('Layout.react').Column,j=c('Layout.react').FillColumn,k=c('React').createClass({displayName:'ProfilePicOverlaySelector',mixins:[c('ProfilePicOverlaySelectorMixin'),c('ReactComponentWithPureRenderMixin')],render:function(){return (c('React').createElement(c('Layout.react'),{className:"__bo"},c('React').createElement(i,{className:"__bp"+(!this._canClickLeft()?' '+"__br":''),onClick:this._onLeftClick},c('React').createElement(c('Image.react'),{src:this._canClickLeft()?this._getDarkLeftGlyph():this._getLightLeftGlyph()})),c('React').createElement(j,{className:"_2pi7"},c('React').createElement(c('XUIText.react'),{size:'small'},this._getControlText())),c('React').createElement(i,{className:"__bp"+(!this._canClickRight()?' '+"__br":''),onClick:this._onRightClick},c('React').createElement(c('Image.react'),{src:this._canClickRight()?this._getDarkRightGlyph():this._getLightRightGlyph()}))));}});f.exports=k;},null);
__d('ProfilePicOverlayZoomCrop.react',['cx','BasicVector','ProfilePicOverlayViewShapes','PhotoZoomCropDimensions','PhotoZoomCropMixin','React','SpotlightProfilePicCropOptions','PhotoZoomCropImage.react','PhotoZoomCropSlider.react','ProfilePicOverlay.react','XUISpinner.react'],function a(b,c,d,e,f,g,h){if(c.__markCompiled)c.__markCompiled();var i=c('React').PropTypes,j=c('React').createClass({displayName:'ProfilePicOverlayZoomCrop',_dims:null,mixins:[c('PhotoZoomCropMixin')],propTypes:{height:i.number.isRequired,onOverlayLoad:i.func,overlayData:c('ProfilePicOverlayViewShapes').OVERLAY_DATA,photoData:c('ProfilePicOverlayViewShapes').PHOTO_DATA.isRequired,savingMode:i.bool.isRequired,width:i.number.isRequired},getInitialState:function(){this._updateDimensions(this.props.photoData);return this._getUpdatedDimensionsState();},componentWillReceiveProps:function(k){if(this.props.photoData.id===k.photoData.id)return;this._updateDimensions(k.photoData);this.setState(this._getUpdatedDimensionsState());},_updateDimensions:function(k){var l=new (c('BasicVector'))(k.original.width,k.original.height),m=c('SpotlightProfilePicCropOptions').getOptionsAsRatio(k,l),n=m.center,o=m.size,p=new (c('PhotoZoomCropDimensions'))(l);p.setSize(this.props.width,this.props.height);if(n)p.setCenter(n.x,n.y);if(o){var q=o.x*l.x;p.setZoom(p.getSize().x/q);}this._dims=p;},_getUpdatedDimensionsState:function(){var k=this._getDimensionsState();k.position=this._dims&&this._dims.getZoom();return k;},render:function(){var k=null;if(this.props.savingMode)k=c('React').createElement('div',{className:"_5chi"},c('React').createElement(c('XUISpinner.react'),{background:'dark',className:"_5chj",size:'large'}));var l=null;if(this.props.overlayData)l=c('React').createElement(c('ProfilePicOverlay.react'),{onLoad:this.props.onOverlayLoad,src:this.props.overlayData.src});return (c('React').createElement('div',null,c('React').createElement('div',{className:"_5cia"},c('React').createElement(c('PhotoZoomCropImage.react'),{className:"_5cib",dimensions:this._dims,onMove:this._handleMove,overlay:l,enableDrag:this._dims&&this._dims.isCurrentlyDragable(),src:this.props.photoData.original.uri}),k),c('React').createElement(c('PhotoZoomCropSlider.react'),{className:"_5cid",onZoom:this._handleZoom,position:this.state.position,zoom:this.state.zoom,zoomRange:this._dims&&this._dims.getZoomRange()})));},__getZoom:function(){return this.state.zoom;}});f.exports=j;},null);
__d('ProfilePicViewerPublicIcon.react',['cx','ProfilePicCropViewerStrings','React','ReactComponentWithPureRenderMixin','Tooltip','Image.react','joinClasses'],function a(b,c,d,e,f,g,h){if(c.__markCompiled)c.__markCompiled();var i=c('React').PropTypes,j=c('React').createClass({displayName:'ProfilePicViewerPublicIcon',mixins:[c('ReactComponentWithPureRenderMixin')],propTypes:{photoData:i.object.isRequired},render:function(){if(this.props.photoData.isWorkUser)return null;return (c('React').createElement(c('Image.react'),babelHelpers['extends']({className:c('joinClasses')(this.props.className,"_3llf")},c('Tooltip').propsFor(c('ProfilePicCropViewerStrings').PROFILE_PIC_VISIBILITY),{src:'/images/mobile/privacy/lightgray_large/everyone.png'})));}});f.exports=j;},null);
__d("XProfilePictureOverlayLandingController",["XController"],function a(b,c,d,e,f,g){c.__markCompiled&&c.__markCompiled();f.exports=c("XController").create("\/profilepicframes\/{?special_path}\/",{photo_id:{type:"Int"},profile_id:{type:"Int"},selected_category_id:{type:"Int"},selected_page_id:{type:"Int"},selected_overlay_id:{type:"Int"},special_path:{type:"String"},overlay_source_object_id:{type:"FBID"}});},null);
__d("XProfilePictureOverlayMenuDialogController",["XController"],function a(b,c,d,e,f,g){c.__markCompiled&&c.__markCompiled();f.exports=c("XController").create("\/gameface\/menu_dialog\/",{__asyncDialog:{type:"Int"}});},null);
__d("XProfilePictureOverlayPhotoAsyncController",["XController"],function a(b,c,d,e,f,g){c.__markCompiled&&c.__markCompiled();f.exports=c("XController").create("\/gameface\/get_photo\/",{photo_id:{type:"String"}});},null);
__d("XReactFeedComposerXPromptDismissController",["XController"],function a(b,c,d,e,f,g){c.__markCompiled&&c.__markCompiled();f.exports=c("XController").create("\/prompts\/dismiss\/",{user_action:{type:"Enum",enumType:1},prompt_id:{type:"String"},prompt_type:{type:"String"},prompt_tracking_string:{type:"String"},prompt_state:{type:"String"}});},null);
__d('ProfilePicOverlayLandingView.react',['cx','ArbiterMixin','AsyncRequest','DateConsts','Event','ProfilePicCropViewerMixin','ProfilePicCropViewerStrings','ProfilePicOverlayViewShapes','ProfilePictureFlowLogging','ProfilePictureOverlaySurface','XReactFeedComposerXPromptDismissController','ProductionPromptShapes','PromptsInteractionsEventNames','React','SpotlightViewerCoreMixin','XProfilePictureOverlayLandingController','XProfilePictureOverlayMenuDialogController','XProfilePictureOverlayPhotoAsyncController','immutable','ActorSelector.react','Layout.react','LeftRight.react','ProfilePicExpirationSelector.react','ProfilePicOverlayChangePictureLink.react','ProfilePicOverlayGridSelector.react','ProfilePicOverlayPhotoPlaceholder.react','ProfilePicOverlaySelector.react','ProfilePicOverlayZoomCrop.react','ProfilePicViewerPublicIcon.react','XUIButton.react','XUICard.react','goURI','tidyEvent'],function a(b,c,d,e,f,g,h){if(c.__markCompiled)c.__markCompiled();var i=c('immutable').Map,j=c('Layout.react').Column,k=512,l=348,m=424,n=469,o=304,p='profile-picture-overlay',q=c('React').PropTypes,r=c('React').createClass({displayName:'ProfilePicOverlayLandingView',mixins:[c('ArbiterMixin'),c('ProfilePicCropViewerMixin'),c('SpotlightViewerCoreMixin')],propTypes:{actorIDs:q.arrayOf(q.string),categories:q.object.isRequired,height:q.number.isRequired,initialPhotoData:c('ProfilePicOverlayViewShapes').PHOTO_DATA,onCategoryChange:q.func.isRequired,onOverlayPrev:q.func.isRequired,onOverlayNext:q.func.isRequired,overlays:q.object.isRequired,pages:q.object.isRequired,promptData:c('ProductionPromptShapes').LOGGING_DATA,selectedCategoryID:q.string,selectedOverlayID:q.string,selectedPageID:q.string,surface:q.string,width:q.number.isRequired,overlaySourceObjectID:q.string},getInitialState:function(){var s={open:true},t=this.props.surface===c('ProfilePictureOverlaySurface').WWW_BIRTHDAY_DIALOG?c('DateConsts').SEC_PER_DAY:c('DateConsts').SEC_PER_WEEK,u={expirationTime:t,photoData:this.props.initialPhotoData,savingMode:false};return babelHelpers['extends']({},s,u);},render:function(){var s=this.props.selectedPageID,t=null;if(this.props.actorIDs&&this.props.actorIDs.length)t=c('React').createElement(c('ActorSelector.react'),{actorIDs:this.props.actorIDs,loading:false,onChange:function(ea){return c('goURI')(c('XProfilePictureOverlayLandingController').getURIBuilder().setInt('profile_id',ea.value).setInt('selected_page_id',s).getURI());},selectedActorID:this.props.profileID,coverEnabled:false});var u=this.props,v=u.overlays,w=u.pages,x=u.selectedOverlayID,y=null;if(v&&v.size>1&&x){var z=w.get(s),aa=z.indexOfOverlayID(x);y=c('React').createElement('div',{className:"_3rff"},c('React').createElement(c('ProfilePicOverlaySelector.react'),{onLeftClick:this._onLeftOverlaySelect,onRightClick:this._onRightOverlaySelect,selectedItem:aa+1,totalItems:v.size}));}var ba=c('XProfilePictureOverlayMenuDialogController').getURIBuilder().getURI(),ca=void 0,da=void 0;if(this.state.photoData.id){ca=c('React').createElement(c('ProfilePicOverlayZoomCrop.react'),{height:this.props.height,onOverlayLoad:this._onOverlayLoad,overlayData:this.getOverlayData(),photoData:this.state.photoData,ref:'zoomCrop',savingMode:this.state.savingMode,width:this.props.width});da=c('React').createElement('div',{className:"_2ftj"},c('React').createElement('div',{className:"_2ftk"},c('React').createElement(c('ProfilePicOverlayChangePictureLink.react'),{dialogURI:ba,onPhotoChoose:this._onPhotoChoose})),y);}else{ca=c('React').createElement('div',{style:{height:n,width:m}},c('React').createElement(c('ProfilePicOverlayPhotoPlaceholder.react'),{dialogURI:ba,dimension:m,onPhotoChoose:this._onPhotoChoose}));da=c('React').createElement('div',{className:"_2ftj"});}return (c('React').createElement(c('XUICard.react'),null,c('React').createElement(c('Layout.react'),{className:"_1v8l",style:{height:k}},c('React').createElement(j,{className:"_1f4"},ca,da),c('React').createElement(j,{className:"_1e8-",style:{width:l}},c('React').createElement(c('ProfilePicOverlayGridSelector.react'),{categories:this.props.categories,onCategorySelectorChange:this._onCategorySelectorChange,onPageClickHandler:this._onPageClickHandler,pages:w,panelHeight:o,selectedCategoryID:this.props.selectedCategoryID,selectedPageID:s}),c('React').createElement('div',{className:"_3rfg"},c('React').createElement(c('ProfilePicExpirationSelector.react'),{allowCustomDate:true,className:"_2pio _56s-",defaultValue:this.state.expirationTime,onChange:function(ea){return this.setState({expirationTime:ea});}.bind(this),showCustomOption:true}),c('React').createElement(c('LeftRight.react'),{className:"_1e91"},t,c('React').createElement(c('LeftRight.react'),null,c('React').createElement(c('ProfilePicViewerPublicIcon.react'),{className:"_1f5",photoData:{}}),c('React').createElement(c('XUIButton.react'),{className:"_1e92",disabled:this.state.savingMode||!this.state.photoData.id||!x,label:c('ProfilePicCropViewerStrings').USE_AS_PROFILE_PICTURE,onClick:function(){return this._handleSave();}.bind(this),size:'large',use:'confirm'}))))))));},_onLeftOverlaySelect:function(){this.setState({savingMode:true});this.props.onOverlayPrev();},_onRightOverlaySelect:function(){this.setState({savingMode:true});this.props.onOverlayNext();},_onCategorySelectorChange:function(s){this.props.onCategoryChange(s.value);},_onPhotoChoose:function(s){this.setState({savingMode:true});var t=c('XProfilePictureOverlayPhotoAsyncController').getURIBuilder().setString('photo_id',s).getURI();new (c('AsyncRequest'))(t).setHandler(this._asyncResponseHandler).send();},_asyncResponseHandler:function(s){var t=s.payload,u=new i(this.state.photoData).set('original',t.original).set('id',t.id).toObject(),v=new Image();c('tidyEvent')(c('Event').listen(v,'load',function(){return this.setState({photoData:u,savingMode:false});}.bind(this)));v.src=t.original.uri;},_onPageClickHandler:function(s){if(s!==this.props.selectedPageID){this.setState({savingMode:true});this.props.onPageChange(s);}},_onOverlayLoad:function(){this.setState({savingMode:false});},_handleSave:function(){if(this.props.promptData){var s=this.props.promptData,t=s.promptID,u=s.promptType,v=s.trackingString;new (c('AsyncRequest'))().setURI(c('XReactFeedComposerXPromptDismissController').getURIBuilder().getURI()).setData({user_action:c('PromptsInteractionsEventNames').POST_PROMPT,prompt_id:t,prompt_type:u,prompt_tracking_string:v}).send();}this.handleCropSave();},getCropArea:function(){return this.refs.zoomCrop.getDimensions().getArea();},getFlowType:function(){return c('ProfilePictureFlowLogging').flow.ZOOMCROP;},getPhotoSize:function(){return this.state.photoData.original;},getCaption:function(){return '';},getOverlayData:function(){var s=this.props.selectedOverlayID;if(s){var t=this.props.overlays.get(s);return {id:s,src:t.getSrc(this.props.overlaySizes[0])};}return null;},getOverlaySourceObjectID:function(){return this.props.overlaySourceObjectID;},getViewerID:function(){return (p+':'+this.state.photoData.id+':'+this.props.profileID+':'+this.props.selectedPageID);}});f.exports=r;},null);