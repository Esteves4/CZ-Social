if (self.CavalryLogger) { CavalryLogger.start_js(["YEan3"]); }

__d("ComposerXAjaxEndpoint",[],function a(b,c,d,e,f,g){c.__markCompiled&&c.__markCompiled();f.exports={ADS_MEDIA_UPLOAD:"\/ajax\/ads\/create\/composerx\/attachment\/media\/upload\/",ADS_ATTACHMENT_STATUS:"\/ajax\/ads\/create\/composerx\/attachment\/status\/",MEDIA_UPLOAD:"\/ajax\/composerx\/attachment\/media\/upload\/",VIDEO_UPLOAD:"\/ajax\/composerx\/attachment\/video\/upload\/"};},null);
__d("ComposerXContextConfig",[],function a(b,c,d,e,f,g){c.__markCompiled&&c.__markCompiled();f.exports={propertyNames:{actorID:"ACTOR_ID",postID:"POST_ID"},propertyValues:{ACTOR_ID:"actorID",POST_ID:"postID"}};},null);
__d('PhotoResizeMath',[],function a(b,c,d,e,f,g){if(c.__markCompiled)c.__markCompiled();var h={getScaledPhotoDimensions:function(i,j,k,l,m){var n=i/j,o=k/l;if(k&&l&&m==='stretch')return {width:k,height:l};if(!k&&l||m==='contain'!==n>=o)return {width:l*n,height:l};if(k)return {width:k,height:k/n};return {width:i,height:j};}};f.exports=h;},null);
__d('PixelzFocus',[],function a(b,c,d,e,f,g){'use strict';if(c.__markCompiled)c.__markCompiled();var h={search:function(i,j){var k=0,l=i.length-1;while(k<=l){var m=k+Math.floor((l-k)/2),n=i[m];if(n>j){l=m-1;}else if(n<j){k=m+1;}else return m;}return Math.min(k,l);},forceSpecificPoint:function(i,j,k){var l=1e-09,m=h.search(i,j-k-l)+1,n=h.search(i,j+k);return i.slice(m,n+1);},findBiggestSets:function(i,j){var k=[],l=-1;for(var m=0;m<i.length;++m){var n=i[m],o=m,p=h.search(i,n+j),q=p-o;if(q>l)k=[];if(q>=l){l=q;k.push({low:o,high:p});}}return k;},getBestSet:function(i,j,k){var l=-1,m=null;for(var n=0;n<j.length;++n){var o=j[n],p=i[o.low],q=i[o.high],r=p+(q-p)/2,s=Math.min(p-(r-k),r+k-q);if(s>l){l=s;m=o;}}return m;},getFocusFromSet:function(i,j){var k=i[j.low],l=i[j.high];return k+(l-k)/2;},clampFocus:function(i,j){var k=j/2,l=1-j/2;if(i<k)return k;if(i>l)return l;return i;},convertFromCenterToCSS:function(i,j){if(Math.abs(1-j)<1e-05)return 0;return (i-j/2)/(1-j);},convertFromCSSToCenter:function(i,j){return i*(1-j)+j/2;},getVisible:function(i,j){if(i<j)return i/j;return j/i;},getHidden:function(i,j){return 1-h.getVisible(i,j);},focusHorizontally:function(i,j){return i<j;},convertVectorFromCenterToCSS:function(i,j,k){var l=h.focusHorizontally(j,k),m;if(l){m=i.x/100;}else m=i.x/100;var n=h.convertFromCenterToCSS(m,h.getVisible(j,k));if(l){return {x:n,y:0};}else return {x:0,y:n};},getCropRect:function(i,j,k){var l=h.focusHorizontally(j,k),m=h.getVisible(j,k);if(l){var n=(1-m)*i.x;return {left:n,top:0,width:m,height:1};}else{var o=(1-m)*i.y;return {left:0,top:o,width:1,height:m};}}};f.exports=h;},null);
__d('loadImage',[],function a(b,c,d,e,f,g){'use strict';if(c.__markCompiled)c.__markCompiled();function h(i,j){var k=new Image();k.onload=function(){j(k.width,k.height,k);};k.src=i;}f.exports=h;},null);
__d('Pixelz.react',['cx','arrayContains','loadImage','joinClasses','React','PhotoResizeMath','PixelzFocus'],function a(b,c,d,e,f,g,h){'use strict';if(c.__markCompiled)c.__markCompiled();var i=c('React').PropTypes,j=c('React').createClass({displayName:'Pixelz',propTypes:{width:i.number,height:i.number,resizeMode:i.oneOf(['contain','cover','stretch']),alt:i.string,letterbox:i.bool,borderRadius:i.number,insetBorderColor:i.string,animated:i.bool,upscale:i.bool,cropRect:function(k,l,m){var n=k[l],o='Invalid prop `'+l+'` supplied to `'+m+'`, expected a rectangle with values normalized '+'between 0 and 1.';if(n.left<0||n.top<0||n.width<0||n.height<0||n.left+n.width>1||n.top+n.height>1)return new Error(o);},focus:function(k,l,m){var n=k[l],o='Invalid prop `'+l+'` supplied to `'+m+'`, expected either a {x, y, type} vector where type '+'is `css` or `center` or an array of {x, y} vectors. All the vectors '+'have with values normalized between 0 and 1.';if(Array.isArray(n)){for(var p=0;p<n.length;++p)if(!(n[p].x>=0&&n[p].x<=1)||!(n[p].y>=0&&n[p].y<=1))return new Error(o);}else{if(!n.type)n.type='css';if(!(n.x>=0&&n.x<=1)||!(n.y>=0&&n.y<=1)||!c('arrayContains')(['center','css'],n.type))return new Error(o);}}},getDefaultProps:function(){return {resizeMode:'cover',alt:'',letterbox:true,upscale:true,cropRect:{width:1,height:1,top:0,left:0},focus:{x:.5,y:.5,type:'css'}};},getInitialState:function(){return {srcDimensions:{}};},getSrcDimensions:function(){var k=this.props.src,l=this.state.srcDimensions[k];if(l)return l;c('loadImage')(k,function(m,n){var o={};o[k]={width:m,height:n};this.isMounted()&&this.setState({srcDimensions:o});}.bind(this));return null;},getCropSrcDimensions:function(){var k=this.getSrcDimensions();return {width:k.width*this.props.cropRect.width,height:k.height*this.props.cropRect.height};},getUpscaleCropDimensions:function(){var k=this.getCropSrcDimensions();return c('PhotoResizeMath').getScaledPhotoDimensions(k.width,k.height,this.props.width,this.props.height,this.props.resizeMode);},getCropDimensions:function(){var k=this.getUpscaleCropDimensions(),l=this.getCropSrcDimensions();if(!this.props.upscale)return {width:Math.min(k.width,l.width),height:Math.min(k.height,l.height)};return k;},getCropAspectRatio:function(){var k=this.getCropDimensions();return k.width/k.height;},getContainerDimensions:function(){if(this.props.letterbox&&this.props.width&&this.props.height)return {width:this.props.width,height:this.props.height};return this.getCropDimensions();},getContainerAspectRatio:function(){var k=this.getContainerDimensions();return k.width/k.height;},getContainerPosition:function(){return {left:0,top:0};},getFocus:function(){var k=this.props.focus;if(!Array.isArray(k)&&k.type==='css')return {x:k.x,y:k.y};var l=this.getContainerAspectRatio(),m=this.getCropAspectRatio(),n=c('PixelzFocus').getVisible(l,m),o=c('PixelzFocus').focusHorizontally(l,m),p;if(!Array.isArray(k)){p=c('PixelzFocus').convertFromCenterToCSS(o?k.x:k.y,n);}else{var q=k.map(function(t){return o?t.x:t.y;});q.sort();var r=c('PixelzFocus').findBiggestSets(q,n),s=c('PixelzFocus').getBestSet(q,r,n);p=c('PixelzFocus').getFocusFromSet(q,s);}return {x:o?p:.5,y:o?.5:p};},getCropPosition:function(){var k=this.getCropDimensions(),l=this.getContainerDimensions(),m=this.getFocus();return {left:m.x*(l.width-k.width),top:m.y*(l.height-k.height)};},getScaleDimensions:function(){var k=this.getCropDimensions();return {width:k.width/this.props.cropRect.width,height:k.height/this.props.cropRect.height};},getScalePosition:function(){var k=this.getScaleDimensions();return {left:-k.width*this.props.cropRect.left,top:-k.height*this.props.cropRect.top};},getClipCropRectangle:function(){var k=this.getContainerDimensions(),l=this.getCropDimensions(),m=this.getContainerPosition(),n=this.getCropPosition(),o=Math.max(m.left,n.left),p=Math.max(m.top,n.top),q=Math.min(m.top+k.height,n.top+l.height),r=Math.min(m.left+k.width,n.left+l.width);return {left:o,top:p,width:r-o,height:q-p};},getClipCropPosition:function(){var k=this.getClipCropRectangle();return {left:k.left,top:k.top};},getClipCropDimensions:function(){var k=this.getClipCropRectangle();return {width:k.width,height:k.height};},getClipScalePosition:function(){var k=this.getScalePosition(),l=this.getClipCropPosition(),m=this.getCropPosition();return {left:k.left+(m.left-l.left),top:k.top+(m.top-l.top)};},getClipScaleDimensions:function(){return this.getScaleDimensions();},areDimensionsEqual:function(k,l){return k.width===l.width&&k.height===l.height;},shouldAddAllNodesAndStyles:function(){return this.props.animated;},hasCrop:function(){if(this.shouldAddAllNodesAndStyles())return true;var k=this.getContainerDimensions(),l=this.getClipCropDimensions(),m=this.getClipScaleDimensions();if(this.areDimensionsEqual(k,l)||this.areDimensionsEqual(l,m))return false;return true;},hasContainer:function(){if(this.shouldAddAllNodesAndStyles()||this.hasInsetBorder())return true;var k=this.getContainerDimensions(),l=this.getClipScaleDimensions();if(this.areDimensionsEqual(k,l))return false;return true;},hasInsetBorder:function(){return this.shouldAddAllNodesAndStyles()||this.props.insetBorderColor;},applyPositionStyle:function(k,l){if(this.shouldAddAllNodesAndStyles()||l.left)k.left=Math.round(l.left);if(this.shouldAddAllNodesAndStyles()||l.top)k.top=Math.round(l.top);},applyDimensionsStyle:function(k,l){k.width=Math.round(l.width);k.height=Math.round(l.height);},applyBorderRadiusStyle:function(k){if(this.shouldAddAllNodesAndStyles()||this.props.borderRadius)k.borderRadius=this.props.borderRadius||0;},getScaleStyle:function(){var k={},l=this.getClipCropDimensions(),m=this.getClipScaleDimensions();if(this.shouldAddAllNodesAndStyles()||!this.areDimensionsEqual(l,m)){this.applyPositionStyle(k,this.getClipScalePosition());}else this.applyPositionStyle(k,this.getClipCropPosition());this.applyDimensionsStyle(k,this.getClipScaleDimensions());this.applyBorderRadiusStyle(k);return k;},getCropStyle:function(){var k={};this.applyPositionStyle(k,this.getClipCropPosition());this.applyDimensionsStyle(k,this.getClipCropDimensions());this.applyBorderRadiusStyle(k);return k;},getInsetBorderStyle:function(){var k={borderColor:this.props.insetBorderColor||'transparent'};this.applyPositionStyle(k,this.getClipCropPosition());this.applyDimensionsStyle(k,this.getClipCropDimensions());this.applyBorderRadiusStyle(k);return k;},getContainerStyle:function(){var k={};this.applyDimensionsStyle(k,this.getContainerDimensions());this.applyBorderRadiusStyle(k);return k;},getScale:function(){var k=this.getScaleStyle(),l=k.width,m=k.height;k=babelHelpers['extends']({},k);delete k.width;delete k.height;return (c('React').createElement('img',babelHelpers['extends']({},this.props,{alt:this.props.alt,className:c('joinClasses')(this.props.className,"_56wb"+(this.shouldAddAllNodesAndStyles()?' '+"_56t5":'')),src:this.props.src,style:babelHelpers['extends']({},this.props.style||{},k),width:l,height:m})));},getCrop:function(){var k=this.getScale();if(!this.hasCrop())return k;return (c('React').createElement('div',{className:"_56ma"+(this.shouldAddAllNodesAndStyles()?' '+"_56t5":''),style:this.getCropStyle()},k));},getInsetBorder:function(){if(!this.hasInsetBorder())return null;return (c('React').createElement('div',{className:"_56lv"+(this.shouldAddAllNodesAndStyles()?' '+"_56t5":''),style:this.getInsetBorderStyle()}));},getContainer:function(){var k=this.getCrop();if(!this.hasContainer())return k;var l=this.getInsetBorder();return (c('React').createElement('div',{className:"_56jj"+(this.shouldAddAllNodesAndStyles()?' '+"_56t5":''),'data-skipchecker':null,style:this.getContainerStyle()},k,l));},render:function(){var k=this.getSrcDimensions();if(!k)return c('React').createElement('span',{'data-skipchecker':null});return this.getContainer();}});f.exports=j;},null);
__d('ComposerXAttachmentBootstrap',['csx','cx','CSS','Form','FormSubmit','Parent','URI'],function a(b,c,d,e,f,g,h,i){if(c.__markCompiled)c.__markCompiled();var j=[],k={bootstrap:function(l){k.load(c('Parent').byTag(l,'form'),l.getAttribute('data-endpoint'));},load:function(l,m,n){var o=new (c('URI'))(m).addQueryData({composerurihash:k.getURIHash(m)});c('CSS').conditionClass(l,"_fu",n);var p=c('Parent').bySelector(l,"._2_4");c('CSS').removeClass(p,'async_saving');c('Form').setDisabled(l,false);l.action=o.toString();c('FormSubmit').send(l);},getURIHash:function(l){if(l==='initial')return 'initial';var m=j.indexOf(l);if(m!==-1){return m+'';}else{m=j.length;j[m]=l;return m+'';}}};f.exports=k;},null);
__d('ComposerXContext',['invariant','ComposerXContextConfig'],function a(b,c,d,e,f,g,h){if(c.__markCompiled)c.__markCompiled();var i=function(k){return c('ComposerXContextConfig').propertyNames[k];};function j(k){'use strict';this.$ComposerXContext1={};for(var l in k)this.setProperty(l,k[l]);}j.prototype.getProperty=function(k){'use strict';!i(k)?h(0):void 0;return this.$ComposerXContext1[k];};j.prototype.setProperty=function(k,l){'use strict';!i(k)?h(0):void 0;this.$ComposerXContext1[k]=l;return this;};j.PROPERTIES=c('ComposerXContextConfig').propertyValues;f.exports=j;},null);
__d('ComposerXSessionIDInserter',['csx','cx','ComposerXSessionIDs','DOM','DOMQuery','Event','Parent','onEnclosingPageletDestroy'],function a(b,c,d,e,f,g,h,i){if(c.__markCompiled)c.__markCompiled();var j={init:function(k){var l=c('Event').listen(k,'submit',j._onSubmit);c('onEnclosingPageletDestroy')(k,function(){l.remove();});},_onSubmit:function(k){j.insertSessionInput(k.getTarget());},insertSessionInput:function(k){var l=c('Parent').bySelector(k,"._119");if(!l)return;var m=c('ComposerXSessionIDs').getSessionID(l.id);if(!m)return;var n=c('DOMQuery').scry(k,"._5r_b")[0];if(!n){c('DOM').prependContent(k,c('ComposerXSessionIDs').createSessionIDInput(m));}else n.value=m;}};f.exports=j;},null);
__d("XStickyComposerChangeController",["XController"],function a(b,c,d,e,f,g){c.__markCompiled&&c.__markCompiled();f.exports=c("XController").create("\/privacy\/sticky_composer\/change\/",{privacyx:{type:"String"},logging_source:{type:"String"}});},null);
__d('PrivacySelector',['csx','cx','Arbiter','ArbiterMixin','AsyncRequest','AudienceSelector','CSS','DOM','PrivacyConst','DataStore','PrivacySelectorNewDispatcher','Run','SelectorDeprecated','SubscriptionsHandler','XStickyComposerChangeController','mixin'],function a(b,c,d,e,f,g,h,i){var j,k;if(c.__markCompiled)c.__markCompiled();j=babelHelpers.inherits(l,c('mixin')(c('ArbiterMixin')));k=j&&j.prototype;function l(m,n){'use strict';k.constructor.call(this);this.$PrivacySelector1=n;if(n){this.$PrivacySelector2=m;}else this.$PrivacySelector3=m;this.$PrivacySelector4=null;this.$PrivacySelector5=new (c('SubscriptionsHandler'))();this.$PrivacySelector6=new (c('SubscriptionsHandler'))();if(this.$PrivacySelector1){this.$PrivacySelector7();}else this.$PrivacySelector8();c('Run').onLeave(this.cleanup.bind(this));}l.prototype.select=function(m,n,o){'use strict';if(!m||!n)throw new Error('PrivacySelector.select: you must pass in privacyParam '+'and privacyBase');if(this.$PrivacySelector1){if(o)this.$PrivacySelector5.addSubscriptions(this.$PrivacySelector2.subscribeOnce('changed',function(p,q){o('changed',{post_param:q.post_param});}));this.$PrivacySelector2.selectOption(m);}else{if(o)this.$PrivacySelector6.addSubscriptions(c('Arbiter').subscribe('AudienceSelector/changed',function(p,q){if(this.$PrivacySelector9(q.selector)){var r=c('SelectorDeprecated').getOptionValue(q.option);o('changed',{privacy_base:r});}}.bind(this)));c('AudienceSelector').setAudience(this.$PrivacySelector3,n);}};l.prototype.expandFull=function(m){'use strict';if(this.$PrivacySelector1){this.$PrivacySelector2.openSelectorExpanded(m);}else this.expand(m);};l.prototype.expandFullAndShowFlyout=function(m){'use strict';this.expandFull(this.showFlyoutOnMenu.bind(this,m));};l.prototype.expand=function(m){'use strict';if(this.$PrivacySelector1){this.$PrivacySelector2.openSelector(m);}else{var n=c('SelectorDeprecated').getSelectorMenu(this.$PrivacySelector3);if(!n){c('SelectorDeprecated').loadMenu(this.$PrivacySelector3,function(){m&&m();});}else this.$PrivacySelector6.addSubscriptions(c('SelectorDeprecated').listen(this.$PrivacySelector3,'open',function(){m&&m();this.$PrivacySelector9(this.$PrivacySelector3);}.bind(this)));c('SelectorDeprecated').toggle(this.$PrivacySelector3,m);}};l.prototype.showFlyoutOnMenu=function(m){'use strict';this.$PrivacySelector10&&this.$PrivacySelector10.hide();this.$PrivacySelector10=m;var n;if(this.$PrivacySelector1){n=this.$PrivacySelector2.getMenuElement();m.setOffsetY(85);}else{n=c('DOM').scry(this.$PrivacySelector3,'div.uiSelectorMenuWrapper')[0];m.setOffsetY(13);}m.setContext(n);m.show();};l.prototype.setOnClose=function(m){'use strict';this.$PrivacySelector4=m;};l.prototype.cleanup=function(){'use strict';this.$PrivacySelector5.release();this.$PrivacySelector5=new (c('SubscriptionsHandler'))();this.$PrivacySelector6.release();this.$PrivacySelector6=new (c('SubscriptionsHandler'))();this.$PrivacySelector10&&this.$PrivacySelector10.hide();this.$PrivacySelector10=null;this.$PrivacySelector4=null;};l.prototype.disable=function(){'use strict';if(this.$PrivacySelector1){this.$PrivacySelector2.getPopoverMenu().disable();}else c('SelectorDeprecated').setEnabled(this.$PrivacySelector3,false);};l.prototype.enable=function(){'use strict';if(this.$PrivacySelector1){this.$PrivacySelector2.getPopoverMenu().enable();}else c('SelectorDeprecated').setEnabled(this.$PrivacySelector3,true);};l.get=function(m){'use strict';if(!m)return;var n=c('DataStore').get(m,'selector');if(!n){m=l.getDOMFromStory(m);if(!m)return;n=c('DataStore').get(m,'selector');}if(n)return new l(n,true);return new l(m,false);};l.getAdamaSelectorInstance=function(m){'use strict';if(!m)return;var n=c('DataStore').get(m,'selector');if(!n){m=l.getDOMFromStory(m);if(!m)return;n=c('DataStore').get(m,'selector');}return n;};l.getDOMFromStory=function(m){'use strict';if(!m)return;var n=c('DOM').scry(m,"._43_1")[0];if(n)return n;return c('AudienceSelector').get(m);};l.getIconFromSelectorDOM=function(m){'use strict';return c('DOM').scry(m,'i.img')[0];};l.setComposerPrivacy=function(m,n,o){'use strict';var p=c('XStickyComposerChangeController').getURIBuilder().setString('privacyx',m);o&&p.setString('logging_source',o);new (c('AsyncRequest'))(p.getURI()).send();c('PrivacySelectorNewDispatcher').handleUpdateFromSelector({selector_type:c('PrivacyConst').PrivacyField.CURRENT_COMPOSER,post_param:m,unique_value:'_updateStickyComposerPrivacy'});var q=c('AudienceSelector').getComposerInstance(n);if(q)c('AudienceSelector').setAudience(q,n);};l.isFakeOrUneditableSelector=function(m){'use strict';return (c('CSS').matchesSelector(m,"._2qwi")||c('CSS').matchesSelector(m,"._29ee")||c('CSS').matchesSelector(m,"._jl")||c('DOM').scry(m,"._2qwi")[0]||c('DOM').scry(m,"._29ee")[0]||c('DOM').scry(m,"._jl")[0]);};l.prototype.$PrivacySelector7=function(){'use strict';this.$PrivacySelector5.addSubscriptions(this.$PrivacySelector2.subscribe('changed',function(m,n){this.inform('changed',{post_param:n.post_param});}.bind(this)),this.$PrivacySelector2.subscribe('selectorFinished',function(){this.$PrivacySelector4&&this.$PrivacySelector4();}.bind(this)));};l.prototype.$PrivacySelector8=function(){'use strict';this.$PrivacySelector5.addSubscriptions(c('Arbiter').subscribe('AudienceSelector/update',function(m,n){if(this.$PrivacySelector3!==n.selector)return;var o=c('SelectorDeprecated').getOptionValue(n.option);this.inform('changed',{privacy_base:o});}.bind(this)),c('Arbiter').subscribe('AudienceSelector/changed',function(m,n){if(this.$PrivacySelector3!==n.selector)return;if(c('CSS').hasClass(n.option,'moreOption')||c('CSS').hasClass(n.option,'returnOption'))return;if(n.value!=c('PrivacyConst').BaseValue.CUSTOM){this.inform('changed',{privacy_base:n.value});}else if(n.value==c('PrivacyConst').BaseValue.CUSTOM)this.$PrivacySelector11=true;}.bind(this)),c('SelectorDeprecated').listen(this.$PrivacySelector3,'close',function(){if(this.$PrivacySelector11){this.$PrivacySelector11=false;return;}this.$PrivacySelector4&&this.$PrivacySelector4();}.bind(this)),c('Arbiter').subscribe('CustomPrivacyOptionController/cancel',function(m,n){if(this.$PrivacySelector3!==n.selector)return;this.$PrivacySelector4&&this.$PrivacySelector4();}.bind(this)));};l.prototype.$PrivacySelector9=function(m){'use strict';if(m!=this.$PrivacySelector3)return false;this.$PrivacySelector6.release();this.$PrivacySelector6=new (c('SubscriptionsHandler'))();return true;};f.exports=l;},null);
__d('ComposerX',['csx','cx','ActorURI','Arbiter','ComposerXAttachmentBootstrap','ComposerXContext','ComposerXMarauderLogger','ComposerXSessionIDs','ComposerXSessionIDInserter','ComposerXStore','CSS','DOM','DOMQuery','PrivacyConst','PrivacySelector','PrivacySelectorNewDispatcher','URI','SubscriptionsHandler','arrayContains','getObjectValues','removeFromArray'],function a(b,c,d,e,f,g,h,i){if(c.__markCompiled)c.__markCompiled();var j='any';function k(l){'use strict';this._root=l;this._composerID=l.id;this._attachments={};this._context=new (c('ComposerXContext'))({});c('ComposerXSessionIDs').resetSessionID(this._composerID);c('ComposerXSessionIDInserter').init(this._root);this._subscriptionsHandler=new (c('SubscriptionsHandler'))();this._subscriptionsHandler.addSubscriptions(c('Arbiter').subscribe(['composer/publish','composer/close'],function(m,n){if(n.composer_id===this._composerID){this.reset();var o=c('DOMQuery').scry(l,'.hidden_target_specs');if(o&&o.length)o.forEach(c('DOM').remove);c('Arbiter').inform('composer/publishDone',n);}}.bind(this)));this._subscriptionsHandler.addSubscriptions.apply(this._subscriptionsHandler,c('ComposerXMarauderLogger').listenForPostEvents(this._composerID,this._getContent()));this._attachmentFetchForm=c('DOMQuery').find(l,"._2_4");c('Arbiter').inform('composer/ready',{},c('Arbiter').BEHAVIOR_STATE);}k.prototype.getAttachment=function(l,m,n,o){'use strict';l=this._augmentURI(l);var p=c('ComposerXAttachmentBootstrap').getURIHash(l);this._endpointHashToShow=p;var q=this._attachments[p];if(q&&!o){this._showAttachmentAfterComponentsLoaded(p,n);}else this.fetchAttachmentData(l,m,o);};k.prototype.fetchAttachmentData=function(l,m,n){'use strict';l=this._augmentURI(l);var o=c('ComposerXAttachmentBootstrap').getURIHash(l);if(this._attachments[o]&&!n)return;if(!c('arrayContains')(this._currentFetchEndpoints,o)){c('ComposerXAttachmentBootstrap').load(this._attachmentFetchForm,l,m);this._currentFetchEndpoints.push(o);}};k.prototype.setAttachment=function(l,m,n,o){'use strict';c('removeFromArray')(this._currentFetchEndpoints,l);this._setupAttachment(l,m,n,o);this._showAttachmentAfterComponentsLoaded(l,false);};k.prototype.setInitialAttachment=function(l,m,n,o,p){'use strict';if(p)this._context=p;l=this._augmentURI(l);var q=c('ComposerXAttachmentBootstrap').getURIHash(l);this._setupAttachment(q,m,n,o);this._initialAttachmentEndpoint=l;if(!this._currentInstance)this._showAttachmentAfterComponentsLoaded(q,true);};k.prototype.setComponent=function(l,m){'use strict';if(!c('ComposerXStore').get(this._composerID,l)){c('ComposerXStore').set(this._composerID,l,m);c('DOM').appendContent(this._attachmentFetchForm,c('DOM').create('input',{type:'hidden',name:'loaded_components[]',value:l}));}};k.prototype.reset=function(){'use strict';if(this._currentInstance){this._currentInstance.cleanup();this._currentInstance=null;}c('ComposerXSessionIDs').resetSessionID(this._composerID);for(var l in this._attachments)this._attachments[l].instance.reset();var m=c('ComposerXStore').getAllForComposer(this._composerID);c('getObjectValues')(m).forEach(function(q){if(q.reset)q.reset(q);});var n=c('PrivacySelector').getAdamaSelectorInstance(c('DOM').scry(this._root,"div._1lo2")[0]),o=c('ComposerXStore').get(this._composerID,'mainprivacywidget'),p=o&&o.instance&&o.instance.getInstance();if(n){p.setInstance(n);}else n=p&&p.getInstance();if(n&&n.shouldReplaceOnPost())if(n.isComposerWithDefault()){n.selectDefaultOption();c('PrivacySelectorNewDispatcher').handleUpdateFromSelector({selector_type:c('PrivacyConst').PrivacyField.DEFAULT_COMPOSER.toString(),post_param:'',unique_id:'_reloadDefaultSelectors',reload:true});}else c('PrivacySelectorNewDispatcher').handleUpdateFromSelector({selector_type:c('PrivacyConst').PrivacyField.CURRENT_COMPOSER.toString(),post_param:'',unique_id:'_reloadStickySelectors',reload:true});this.getAttachment(this._initialAttachmentEndpoint,false,true);c('Arbiter').inform('composer/reset');};k.prototype.destroy=function(){'use strict';this._subscriptionsHandler.release();};k.prototype.addPlaceholders=function(l,m){'use strict';var n;for(var o in this._attachments){n=this._attachments[o];if(n.instance===l){m.forEach(function(p){n.placeholders.push(p);n.required_components.push(p.component_name);});break;}}if(this._currentInstance===l)this._fillPlaceholders(m);};k.prototype.hasAttachmentWithClassName=function(l){'use strict';return c('DOMQuery').scry(this._root,'.'+l).length>0;};k.prototype.showAttachmentThrobber=function(){'use strict';c('CSS').addClass(this._attachmentFetchForm,'async_saving');};k.prototype.hideAttachmentThrobber=function(){'use strict';c('CSS').removeClass(this._attachmentFetchForm,'async_saving');};k.prototype.getContext=function(){'use strict';return this._context;};k.prototype.getID=function(){'use strict';return this._composerID;};k.prototype._setupAttachment=function(l,m,n,o){'use strict';m.setComposerID(this._composerID);this._attachments[l]={instance:m,placeholders:n,required_components:o};var p=this._getContent(),q=m.getRoot();if(q.parentNode!==p){c('CSS').hide(q);c('DOM').appendContent(p,q);}};k.prototype._getContent=function(){'use strict';return c('DOMQuery').find(this._root,"div._55d0");};k.prototype._showAttachment=function(l,m,n,o){'use strict';if(this._currentInstance===l)return;if(this._endpointHashToShow===j){this._endpointHashToShow=null;}else if(this._endpointHashToShow!==m)return;if(this._currentInstance){if(!this._currentInstance.canSwitchAway())return;this._currentInstance.cleanup();}this._currentInstance=l;var p=this._getContent().childNodes,q=l.getRoot();for(var r=0;r<p.length;r++)if(p[r]!==q)c('CSS').hide(p[r]);c('CSS').show(q);this._fillPlaceholders(n);l.initWithComponents(o);this._setAttachmentSelectedClass(l.attachmentClassName);c('Arbiter').inform('composer/initializedAttachment',{composerRoot:this._root,isInitial:o});};k.prototype._showAttachmentAfterComponentsLoaded=function(l,m){'use strict';var n=this._attachments[l];c('ComposerXStore').waitForComponents(this._composerID,n.required_components,this._showAttachment.bind(this,n.instance,l,n.placeholders,m));};k.prototype._fillPlaceholders=function(l){'use strict';l.forEach(function(m){var n=c('ComposerXStore').get(this._composerID,m.component_name);if(n.element&&m.element!==n.element.parentNode)c('DOM').setContent(m.element,n.element);}.bind(this));};k.prototype._setAttachmentSelectedClass=function(l){'use strict';var m=c('DOMQuery').scry(this._root,"._519b")[0],n;if(m){c('CSS').removeClass(m,"_519b");n=c('DOMQuery').scry(m,'*[aria-pressed="true"]')[0];if(n)n.setAttribute('aria-pressed','false');}if(l){var o=c('DOMQuery').scry(this._root,'.'+l)[0];if(o){c('CSS').addClass(o,"_519b");n=c('DOMQuery').scry(o,'*[aria-pressed="false"]')[0];if(n)n.setAttribute('aria-pressed','true');}}};k.prototype._augmentURI=function(l){'use strict';var m=this._context.getProperty(c('ComposerXContext').PROPERTIES.ACTOR_ID),n=m?c('ActorURI').create(l,m):new (c('URI'))(l),o=this._context.getProperty(c('ComposerXContext').PROPERTIES.POST_ID);if(o)n.addQueryData('post_id',o);return n.toString();};Object.assign(k.prototype,{_endpointHashToShow:j,_currentFetchEndpoints:[],_initialAttachmentEndpoint:''});f.exports=k;},null);
__d('registerForLeaveWarning',['fbt','Run','URI','createCancelableFunction'],function a(b,c,d,e,f,g,h){if(c.__markCompiled)c.__markCompiled();function i(k){var l=c('URI').getNextURI(),m=c('createCancelableFunction')(k);c('Run').onBeforeUnload(function(){return j(m,l);});return m;}function j(k,l){var m=c('URI').getMostRecentURI(),n=c('URI').getNextURI(),o=m.getQueryData().hasOwnProperty('theater')&&l.path===n.path,p=n.getQueryData().hasOwnProperty('theater'),q=b.DialogNavigationStack&&b.DialogNavigationStack.isActiveURI(n);if(o||p||q){c('Run').onAfterLoad(function(){c('Run').onBeforeUnload(function(){return j(k,l);});});return;}if(b.Dialog&&b.Dialog.getCurrent())return;if(k())return h._("Voc\u00ea ainda n\u00e3o terminou de escrever sua publica\u00e7\u00e3o. Deseja sair sem terminar?");}f.exports=i;},null);
__d('ComposerXController',['csx','cx','invariant','ActorURI','Arbiter','ComposerX','ComposerXAttachmentBootstrap','ComposerXContext','ComposerXMarauderLogger','Event','Parent','$','emptyFunction','ge','registerForLeaveWarning'],function a(b,c,d,e,f,g,h,i,j){if(c.__markCompiled)c.__markCompiled();var k={},l={},m={};function n(r){var s=c('ge')(r);if(!s)return null;var t=c('Parent').bySelector(c('$')(r),"._119"),u=t.id;if(!m[u])m[u]=new (c('ComposerX'))(t);return m[u];}function o(r){var s=n(r);!(s!==null)?j(0):void 0;return s;}function p(r){if(!l[r])return;l[r].forEach(function(s){return s.cancel();});delete l[r];}var q={registerConditionForComposerCancel:function(r,s){var t=o(r).getID();if(!(t in k))k[t]=[];k[t].push(s);if(!(t in l))l[t]=[];l[t].push(c('registerForLeaveWarning')(s));},hasChanges:function(r){var s=k[r];if(!s)return false;return s.some(function(t){return t();});},getAttachment:function(r,s,t,u){var v=o(r);v.getAttachment(s,t,null,u);},fetchAttachmentData:function(r,s,t){o(r).fetchAttachmentData(s,t);},setAttachment:function(r,s,t,u,v){var w=n(r);if(w)w.setAttachment(s,t,u,v);},setInitialAttachment:function(r,s,t,u,v,w){var x=o(r);x.setInitialAttachment(s,t,u,v,w);},setComponent:function(r,s,t){var u=n(r);if(u)u.setComponent(s,t);},reset:function(r){var s=o(r);s.reset();},holdTheMarkup:c('emptyFunction'),getEndpoint:function(r,s,t){var u=o(r),v=u.getContext();s=c('ActorURI').create(s,v.getProperty(c('ComposerXContext').PROPERTIES.ACTOR_ID)).toString();c('ComposerXAttachmentBootstrap').load(u._attachmentFetchForm,s,t);},addPlaceholders:function(r,s,t){var u=o(r);u.addPlaceholders(s,t);},hasAttachmentWithClassName:function(r,s){var t=o(r);return t.hasAttachmentWithClassName(s);},showAttachmentThrobber:function(r){var s=o(r);s.showAttachmentThrobber();},hideAttachmentThrobber:function(r){var s=o(r);s.hideAttachmentThrobber();},logEventForElement:function(r,s){c('Event').listen(r,'click',function(){var t=q.getComposerID(r);c('ComposerXMarauderLogger').logEvent(s,t);});},getComposerID:function(r){return o(r).getID();},destroyComposer:function(r){if(!(r in m))return;m[r].destroy();delete m[r];delete k[r];p(r);}};c('ComposerXAttachmentBootstrap').bootstrap=function(r){q.getAttachment(r,r.getAttribute('data-endpoint'));};c('Arbiter').subscribe('page_transition',function(){for(var r in m)if(!c('ge')(r))q.destroyComposer(r);});f.exports=q;},null);
__d("isAnimatedGif",["Promise"],function a(b,c,d,e,f,g){if(c.__markCompiled)c.__markCompiled();var h=1e+06;function i(m){return m[0]===71&&m[1]===73&&m[2]===70;}function j(m,n){return m[n]===0&&m[n+1]===33&&m[n+2]===249&&m[n+3]===4&&m[n+8]===0&&(m[n+9]===44||m[n+9]===33);}function k(m){if(!i(m))return false;var n=0;for(var o=0;o+9<m.length;++o){if(j(m,o))n++;if(n>1)return true;}return false;}function l(m){return new (c("Promise"))(function(n){var o=new FileReader();o.onloadend=function(r){if(r.target.readyState==FileReader.DONE){var s=new Uint8Array(r.target.result);if(k(s)){n(true);}else n(false);}};o.onerror=function(r){n(false);};var p=Math.min(h,m.size),q=m.slice(0,p);o.readAsArrayBuffer(q);});}f.exports=l;},null);
__d('ComposerXMediaUploadHandler',['fbt','Arbiter','AsyncRequest','ComposerXAjaxEndpoint','ComposerXController','CSS','Dialog','ImageExtensions','QE','ReloadPage','SubscriptionsHandler','URI','VideoUploadConfig','VideoUploadFile','isAnimatedGif'],function a(b,c,d,e,f,g,h){if(c.__markCompiled)c.__markCompiled();var i=c('ComposerXAjaxEndpoint').MEDIA_UPLOAD,j='/ajax/composerx/attachment/video/upload/',k=0;function l(m,n){'use strict';this.$ComposerXMediaUploadHandler1=m;this.$ComposerXMediaUploadHandler2=n;}l.prototype.fetchAttachments=function(){'use strict';[this.getPhotoUploadAttachmentEndpoint(),j].forEach(function(m){c('ComposerXController').fetchAttachmentData(this.$ComposerXMediaUploadHandler1,m);}.bind(this));};l.prototype.handleFileSelected=function(m){'use strict';var n=this;l.isVideoOrAnimatedGifAsync(m,function(o){if(o){n.handleVideoSelected(m);}else n.handlePhotoSelected(m);});};l.canUploadAnimatedGIF=function(){'use strict';return c('ImageExtensions').GIF in c('VideoUploadConfig').videoExtensions;};l.isVideoOrAnimatedGifAsync=function(m,n){'use strict';var o=c('VideoUploadFile').getExtensionFromFileInput(m.getInput());if(l.canUploadAnimatedGIF()&&o===c('ImageExtensions').GIF){c('isAnimatedGif')(m.getInput().files[0]).then(n);}else if(c('VideoUploadConfig').videoExtensions[o]){n(true);}else n(false);};l.prototype.$ComposerXMediaUploadHandler3=function(){'use strict';c('QE').logExposure('www_videos_user_upload_flow');};l.prototype.handleVideoSelected=function(m){'use strict';this.$ComposerXMediaUploadHandler3();if(this.$ComposerXMediaUploadHandler2&&this.$ComposerXMediaUploadHandler2.imagesOnly){var n=new (c('Dialog'))().setModal(true).setButtons([c('Dialog').OK]);if(this.$ComposerXMediaUploadHandler2.isEditComposer){n.setTitle(h._("Imposs\u00edvel adicionar v\u00eddeo")).setBody(h._("Desculpe, voc\u00ea n\u00e3o pode adicionar um v\u00eddeo \u00e0 publica\u00e7\u00e3o que voc\u00ea est\u00e1 editando."));}else n.setTitle(h._("Arquivo de imagem inv\u00e1lido")).setBody(h._("Envie um arquivo de imagem v\u00e1lido."));n.show();return;}c('ComposerXController').getAttachment(this.$ComposerXMediaUploadHandler1,j);c('Arbiter').inform('ComposerXFilesStore/filesAdded/'+this.$ComposerXMediaUploadHandler1+'/videoupload',{fileInput:m},c('Arbiter').BEHAVIOR_PERSISTENT);};l.prototype.handlePhotoSelected=function(m){'use strict';c('ComposerXController').getAttachment(this.$ComposerXMediaUploadHandler1,this.getPhotoUploadAttachmentEndpoint());l.$ComposerXMediaUploadHandler4(this.$ComposerXMediaUploadHandler1,m);};l.isVideoFile=function(m){'use strict';var n=c('VideoUploadFile').getExtensionFromFileInput(m.getInput());return !!c('VideoUploadConfig').videoExtensions[n];};l.prototype.$ComposerXMediaUploadHandler5=function(){'use strict';return this.$ComposerXMediaUploadHandler2?this.$ComposerXMediaUploadHandler2.photoUploadOverrideEndpoint:null;};l.prototype.getPhotoUploadAttachmentEndpoint=function(){'use strict';var m=this.$ComposerXMediaUploadHandler5();return m?m:i;};l.$ComposerXMediaUploadHandler4=function(m,n){'use strict';c('Arbiter').inform('ComposerXFilesStore/filesAdded/'+m+'/mediaupload',{fileInput:n,receivedBySubscriber:false},c('Arbiter').BEHAVIOR_PERSISTENT);};l.setupFileUploadToComposerDialog=function(m,n,o,p){'use strict';var q='composerxmediauploadhandler'+k++,r=function(u){c('CSS').conditionClass(m.getControl(),o,u);m.getInput().disabled=u;},s=new (c('URI'))(n),t=s.getQueryData();t.client_ref=q;s.setQueryData(t);n=s.toString();m.subscribe('change',function(){new (c('AsyncRequest'))().setURI(n).setErrorHandler(function(){m.clear();r(false);}).send();r(true);});c('Arbiter').subscribe('composer/dialog/'+q+'/new',function(u,v){this.$ComposerXMediaUploadHandler4(v.composerID,m);var w=new (c('SubscriptionsHandler'))();w.addSubscriptions(c('Arbiter').subscribe('composer/publish',function(event,x){if(p&&v.composerID===x.composer_id)c('ReloadPage').now();}),v.dialog.subscribe('hide',function(){w.release();m.clear();r(false);}));}.bind(this));};f.exports=l;},null);
__d("Autosize",["cx","CSS","DOM","Style"],function a(b,c,d,e,f,g,h){if(c.__markCompiled)c.__markCompiled();var i=['fontFamily','fontStyle','fontVariant','fontWeight','letterSpacing','textDecoration','textIndent','textTransform','whiteSpace','wordSpacing','wordWrap'],j=/^[0-9]+$/;function k(p){var q=p.cloneNode(true);c("CSS").addClass(q,"_4g");var r=p.clientWidth-c("Style").getFloat(p,'paddingLeft')-c("Style").getFloat(p,'paddingRight');c("Style").set(q,'width',r+'px');var s=p.clientHeight-c("Style").getFloat(p,'paddingTop')-c("Style").getFloat(p,'paddingBottom');c("Style").set(q,'height',s+'px');c("DOM").insertAfter(p,q);return q;}function l(p,q,r,s,t){var u=p.style.fontSize,v=p.style.height;c("Style").set(p,"height","auto");if(q!==null){var w=p.style.width;c("Style").set(p,"width","auto");}var x=0,y=t.length-1;while(x<y){var z=Math.ceil((x+y)/2);c("Style").set(p,"font-size",t[z]+s);if(r!==null&&p.scrollHeight>r||q!==null&&p.scrollWidth>q){y=z-1;}else x=z;}p.style.fontSize=u;p.style.height=v;if(q!==null)p.style.width=w;return t[x]+s;}function m(p,q,r,s,t,u){var v=p.style.fontSize,w=p.style.height;c("Style").set(p,"height","auto");if(q!==null){var x=p.style.width;c("Style").set(p,"width","auto");}c("Style").set(p,"font-size",u+s);if((r===null||p.scrollHeight<=r)&&(q===null||p.scrollWidth<=q)){p.style.fontSize=v;p.style.height=w;if(q!==null)p.style.width=x;return u+s;}c("Style").set(p,"font-size",t+s);if(r!==null&&p.scrollHeight>r||q!==null&&p.scrollWidth>q){p.style.fontSize=v;p.style.height=w;if(q!==null)p.style.width=x;return t+s;}while(t+1<u){var y=Math.ceil((t+u)/2);c("Style").set(p,"font-size",y+s);if(r!==null&&p.scrollHeight>r||q!==null&&p.scrollWidth>q){u=y;}else t=y;}p.style.fontSize=v;p.style.height=w;if(q!==null)p.style.width=x;return t+s;}function n(p,q){this._wrap=p;this._attr=q;if(this._attr.sizes){var r=this._attr.sizes;for(var s=1,t=r.length;s<t;s++){if(r[s-1]<=r[s])continue;r.sort(function(v,w){return v-w;});break;}}else if(q.min>q.max){var u=q.min;q.min=q.max;q.max=u;}this.fit();}n.prototype.fit=function(p,q){var r=this._wrap;if(!r.clientWidth){o.push(this);return;}var s=k(r);if(typeof p==="undefined")p=this._attr.width;if(j.test(p)){s.style.width=p+"px";}else if(p!==null&&p!=="auto")s.style.width=p;if(typeof q==="undefined")q=this._attr.height;if(j.test(q)){s.style.height=q+"px";}else if(q!==null&&q!=="auto")s.style.height=q;var t=null;if(!this._attr.wrap)t=s.clientWidth;var u=null;if(this._attr.wrap||q!==null)u=s.clientHeight;var v;if(this._attr.sizes){v=l(s,t,u,"px",this._attr.sizes);}else v=m(s,t,u,"px",this._attr.min,this._attr.max);c("DOM").remove(s);c("Style").set(r,"font-size",v);c("CSS").removeClass(r,"invisible_elem");};var o=[];n.onNodeInserted=function(){var p=o;o=[];p.forEach(function(q){q.fit();});};f.exports=n;},null);
__d('FileFormResetOnSubmit',['DOMQuery','Event','emptyFunction'],function a(b,c,d,e,f,g){if(c.__markCompiled)c.__markCompiled();function h(j,k){var l=c('Event').listen(j,'change',c('emptyFunction').thatReturnsFalse,c('Event').Priority.URGENT);try{k();}catch(m){throw m;}finally{l.remove();}}function i(j){'use strict';this._form=j;}i.prototype.enable=function(){'use strict';var j=this._reset.bind(this);this._subscription=this._form.subscribe('submit',function(){setTimeout(j,0);});};i.prototype.disable=function(){'use strict';this._subscription.unsubscribe();this._subscription=null;};i.prototype._reset=function(){'use strict';var j=this._form.getRoot();h(j,function(){var k=c('DOMQuery').scry(j,'input[type="file"]');k.forEach(function(l){l.value='';});});};f.exports=i;},null);
__d('FormSubmitOnChange',['Event','submitForm'],function a(b,c,d,e,f,g){if(c.__markCompiled)c.__markCompiled();function h(i){'use strict';this._form=i;}h.prototype.enable=function(){'use strict';this._listener=c('Event').listen(this._form.getRoot(),'change',this._submit.bind(this));};h.prototype.disable=function(){'use strict';this._listener.remove();this._listener=null;};h.prototype._submit=function(){'use strict';c('submitForm')(this._form.getRoot());};Object.assign(h.prototype,{_listener:null});f.exports=h;},null);
__d('VaultBoxURI',['URI'],function a(b,c,d,e,f,g){if(c.__markCompiled)c.__markCompiled();var h={PHOTOS_SYNCED:'photos_synced',isVaultBoxURI:function(i){var j=new RegExp("\/"+h.PHOTOS_SYNCED+"\/?$");return i.getPath().match(j)&&i.getQueryData().hasOwnProperty('view_image');},isVaultArchiveURI:function(i){var j=new RegExp("\/"+h.PHOTOS_SYNCED+"\/?$");return i.getPath().match(j);},getSyncedTabURI:function(){return new (c('URI'))('/me/'+h.PHOTOS_SYNCED).getQualifiedURI();}};f.exports=h;},null);